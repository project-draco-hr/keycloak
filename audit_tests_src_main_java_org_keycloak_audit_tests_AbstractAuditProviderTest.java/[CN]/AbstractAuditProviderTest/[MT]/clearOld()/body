{
  provider.onEvent(create(System.currentTimeMillis() - 30000,"event","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create(System.currentTimeMillis() - 20000,"event","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create(System.currentTimeMillis(),"event","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create(System.currentTimeMillis(),"event","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create(System.currentTimeMillis() - 30000,"event","realmId2","clientId","userId","127.0.0.1","error"));
  provider.close();
  provider=factory.create(null);
  provider.clear("realmId",System.currentTimeMillis() - 10000);
  Assert.assertEquals(3,provider.createQuery().getResultList().size());
}
