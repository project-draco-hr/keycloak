{
  provider.onEvent(create("event","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create("event2","realmId","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create("event","realmId2","clientId","userId","127.0.0.1","error"));
  provider.onEvent(create("event","realmId","clientId2","userId","127.0.0.1","error"));
  provider.onEvent(create("event","realmId","clientId","userId2","127.0.0.1","error"));
  provider.close();
  provider=factory.create();
  Assert.assertEquals(4,provider.createQuery().client("clientId").getResultList().size());
  Assert.assertEquals(4,provider.createQuery().realm("realmId").getResultList().size());
  Assert.assertEquals(4,provider.createQuery().event("event").getResultList().size());
  Assert.assertEquals(4,provider.createQuery().user("userId").getResultList().size());
  Assert.assertEquals(1,provider.createQuery().user("userId").event("event2").getResultList().size());
  Assert.assertEquals(2,provider.createQuery().maxResults(2).getResultList().size());
  Assert.assertEquals(1,provider.createQuery().firstResult(4).getResultList().size());
}
