{
  Iterable<AuthenticationProvider> providers=providerSession.getAllProviders(AuthenticationProvider.class);
  Map<String,AuthenticationProvider> providersMap=new HashMap<String,AuthenticationProvider>();
  for (  AuthenticationProvider provider : providers) {
    providersMap.put(provider.getName(),provider);
  }
  return new AuthenticationProviderManager(realm,providersMap);
}
