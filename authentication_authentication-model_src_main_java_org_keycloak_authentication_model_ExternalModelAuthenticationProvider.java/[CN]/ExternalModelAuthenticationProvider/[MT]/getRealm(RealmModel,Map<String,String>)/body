{
  String realmId=configuration.get(AuthProviderConstants.EXTERNAL_REALM_ID);
  if (realmId == null) {
    throw new AuthenticationProviderException("Option '" + AuthProviderConstants.EXTERNAL_REALM_ID + "' not specified in configuration");
  }
  RealmModel realm=keycloakSession.model().getRealm(realmId);
  if (realm == null) {
    throw new AuthenticationProviderException("Realm with id '" + realmId + "' doesn't exists");
  }
  return realm;
}
