{
  IdentityManager identityManager=getIdentityManager(realm);
  try {
    User picketlinkUser=new User(username);
    identityManager.add(picketlinkUser);
    picketlinkUser=BasicModel.getUser(identityManager,picketlinkUser.getLoginName());
    return picketlinkUser.getId();
  }
 catch (  IdentityManagementException ie) {
    throw convertIDMException(ie);
  }
}
