{
synchronized (allProviders) {
    if (!allProviders.containsKey(session))     return;
    try {
      writeModelFile(session);
    }
  finally {
      allProviders.remove(session);
    }
  }
}
