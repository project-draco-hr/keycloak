{
  String host=config.get("host",ServerAddress.defaultHost());
  int port=config.getInt("port",ServerAddress.defaultPort());
  String dbName=config.get("db","keycloak");
  String user=config.get("user");
  String password=config.get("password");
  MongoClientOptions clientOptions=getClientOptions();
  MongoClient client;
  if (user != null && password != null) {
    MongoCredential credential=MongoCredential.createMongoCRCredential(user,dbName,password.toCharArray());
    client=new MongoClient(new ServerAddress(host,port),Collections.singletonList(credential),clientOptions);
  }
 else {
    client=new MongoClient(new ServerAddress(host,port),clientOptions);
  }
  operationalInfo=new LinkedHashMap<>();
  operationalInfo.put("mongoServerAddress",client.getAddress().toString());
  operationalInfo.put("mongoDatabaseName",dbName);
  operationalInfo.put("mongoUser",user);
  operationalInfo.put("mongoDriverVersion",client.getVersion());
  logger.debugv("Initialized mongo model. host: %s, port: %d, db: %s",host,port,dbName);
  return client;
}
