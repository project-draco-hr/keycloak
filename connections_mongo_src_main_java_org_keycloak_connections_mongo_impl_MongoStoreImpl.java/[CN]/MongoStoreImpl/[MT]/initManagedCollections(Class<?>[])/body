{
  for (  Class<?> clazz : managedEntityTypes) {
    EntityInfo entityInfo=getEntityInfo(clazz);
    String dbCollectionName=entityInfo.getDbCollectionName();
    if (dbCollectionName != null && !database.collectionExists(dbCollectionName)) {
      DBCollection dbCollection=database.getCollection(dbCollectionName);
      logger.debug("Created collection " + dbCollection.getName() + " in "+ this.database.getName());
      MongoIndex index=clazz.getAnnotation(MongoIndex.class);
      if (index != null) {
        createIndex(dbCollection,index);
      }
      MongoIndexes indexes=clazz.getAnnotation(MongoIndexes.class);
      if (indexes != null) {
        for (        MongoIndex i : indexes.value()) {
          createIndex(dbCollection,i);
        }
      }
    }
  }
}
