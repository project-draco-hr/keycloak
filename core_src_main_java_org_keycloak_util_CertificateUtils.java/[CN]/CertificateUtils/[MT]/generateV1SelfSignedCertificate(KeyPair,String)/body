{
  BigInteger serialNumber=BigInteger.valueOf(System.currentTimeMillis());
  X509V1CertificateGenerator certGen=new X509V1CertificateGenerator();
  X500Principal subjectPrincipal=new X500Principal("CN=" + subject);
  certGen.setSerialNumber(serialNumber);
  certGen.setIssuerDN(subjectPrincipal);
  certGen.setNotBefore(new Date(System.currentTimeMillis() - 100000));
  Calendar calendar=Calendar.getInstance();
  calendar.add(Calendar.YEAR,10);
  certGen.setNotAfter(calendar.getTime());
  certGen.setSubjectDN(subjectPrincipal);
  certGen.setPublicKey(keyPair.getPublic());
  certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");
  X509Certificate cert=certGen.generate(keyPair.getPrivate(),"BC");
  return cert;
}
