{
  File home=getHome();
  File lib=file(home,"target","embedded-ldap");
  if (!lib.exists()) {
    System.err.println("Could not find lib directory: " + lib.toString());
    System.exit(1);
  }
 else {
    System.out.println("Found directory to load jars: " + lib.getAbsolutePath());
  }
  List<URL> jars=new ArrayList<URL>();
  for (  File file : lib.listFiles()) {
    jars.add(file.toURI().toURL());
  }
  URL[] urls=jars.toArray(new URL[jars.size()]);
  URLClassLoader loader=new URLClassLoader(urls,EmbeddedLDAPLauncher.class.getClassLoader());
  Class mainClass=loader.loadClass(className);
  Method executeMethod=null;
  for (  Method m : mainClass.getMethods())   if (m.getName().equals("execute")) {
    executeMethod=m;
    break;
  }
  Object obj=args;
  executeMethod.invoke(null,obj,defaultProperties);
}
