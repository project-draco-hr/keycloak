{
  this.propsFileLocation=config.get("propertiesFileLocation");
  InputStream propertiesStream=null;
  this.properties=new Properties();
  try {
    if (propsFileLocation == null) {
      log.info("propertiesFileLocation not configured. Using default users.properties file from classpath.");
      log.warn("Password updates won't be persisted!");
      propertiesStream=getClass().getClassLoader().getResourceAsStream("users.properties");
    }
 else {
      log.info("Using properties file from location: " + propsFileLocation);
      propertiesStream=new FileInputStream(propsFileLocation);
    }
    this.properties.load(propertiesStream);
  }
 catch (  IOException ioException) {
    throw new RuntimeException(ioException);
  }
 finally {
    if (propertiesStream != null) {
      try {
        propertiesStream.close();
      }
 catch (      IOException e) {
        log.error("Error when closing InputStream",e);
      }
    }
  }
}
