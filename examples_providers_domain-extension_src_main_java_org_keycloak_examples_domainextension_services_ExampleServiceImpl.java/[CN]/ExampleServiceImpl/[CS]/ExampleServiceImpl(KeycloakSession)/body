{
  this.session=session;
  if (getRealm() == null) {
    throw new IllegalStateException("The service cannot accept a session without a realm in it's context.");
  }
  companyRepository=new CompanyRepository(getEntityManager());
}
