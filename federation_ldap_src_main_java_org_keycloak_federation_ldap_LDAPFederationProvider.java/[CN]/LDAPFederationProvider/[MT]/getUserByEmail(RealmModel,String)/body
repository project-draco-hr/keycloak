{
  IdentityManager identityManager=getIdentityManager();
  try {
    User picketlinkUser=queryByEmail(identityManager,email);
    if (picketlinkUser == null) {
      return null;
    }
    if (!email.equals(picketlinkUser.getEmail())) {
      logger.warnf("User found in LDAP but with different email. LDAP email: %s, Searched email: %s",email,picketlinkUser.getEmail());
      return null;
    }
    return importUserFromPicketlink(realm,picketlinkUser);
  }
 catch (  IdentityManagementException ie) {
    throw convertIDMException(ie);
  }
}
