{
  IdentityQueryBuilder queryBuilder=ldapIdentityStore.createQueryBuilder();
  IdentityQuery<LDAPUser> query=queryBuilder.createIdentityQuery(LDAPUser.class).where(queryBuilder.equal(LDAPUser.EMAIL,email));
  List<LDAPUser> users=query.getResultList();
  if (users.isEmpty()) {
    return null;
  }
 else   if (users.size() == 1) {
    return users.get(0);
  }
 else {
    throw new ModelDuplicateException("Error - multiple users found with same email " + email);
  }
}
