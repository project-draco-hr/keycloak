{
  if (ldapProvider.getEditMode() == UserFederationProvider.EditMode.WRITABLE && !isReadOnly(mapperModel)) {
    AbstractTxAwareLDAPUserModelDelegate txDelegate=new AbstractTxAwareLDAPUserModelDelegate(delegate,ldapProvider,ldapObject){
      @Override public void setFirstName(      String firstName){
        super.setFirstName(firstName);
        setFullNameToLDAPObject();
      }
      @Override public void setLastName(      String lastName){
        super.setLastName(lastName);
        setFullNameToLDAPObject();
      }
      private void setFullNameToLDAPObject(){
        String fullName=getFullName(getFirstName(),getLastName());
        if (logger.isTraceEnabled()) {
          logger.tracef("Pushing full name attribute to LDAP. Full name: %s",fullName);
        }
        ensureTransactionStarted();
        String ldapFullNameAttrName=getLdapFullNameAttrName(mapperModel);
        ldapObject.setAttribute(ldapFullNameAttrName,fullName);
      }
    }
;
    return txDelegate;
  }
 else {
    return delegate;
  }
}
