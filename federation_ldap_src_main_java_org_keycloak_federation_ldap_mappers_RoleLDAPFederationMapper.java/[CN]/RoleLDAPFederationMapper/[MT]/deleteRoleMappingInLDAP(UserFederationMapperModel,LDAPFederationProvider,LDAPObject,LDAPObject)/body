{
  Set<String> memberships=getExistingMemberships(mapperModel,ldapRole);
  MembershipType membershipType=getMembershipTypeLdapAttribute(mapperModel);
  String userMembership=getMembershipFromUser(ldapUser,membershipType);
  memberships.remove(userMembership);
  if (memberships.size() == 0 && membershipType == MembershipType.DN && !ldapProvider.getLdapIdentityStore().getConfig().isActiveDirectory()) {
    memberships.add(LDAPConstants.EMPTY_MEMBER_ATTRIBUTE_VALUE);
  }
  ldapRole.setAttribute(getMembershipLdapAttribute(mapperModel),memberships);
  ldapProvider.getLdapIdentityStore().update(ldapRole);
}
