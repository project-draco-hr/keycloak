{
  boolean realmRolesMapping=parseBooleanParameter(mapperModel,USE_REALM_ROLES_MAPPING);
  if (realmRolesMapping) {
    return realm;
  }
 else {
    String clientId=mapperModel.getConfig().get(CLIENT_ID);
    if (clientId == null) {
      throw new IllegalStateException("Using client roles mapping is requested, but parameter client.id not found!");
    }
    ClientModel client=realm.getClientByClientId(clientId);
    if (client == null) {
      throw new IllegalStateException("Can't found requested client with clientId: " + clientId);
    }
    return client;
  }
}
