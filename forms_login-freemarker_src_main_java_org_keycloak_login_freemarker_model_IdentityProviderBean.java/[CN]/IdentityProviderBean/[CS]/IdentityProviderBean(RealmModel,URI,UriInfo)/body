{
  this.realm=realm;
  List<IdentityProviderModel> identityProviders=realm.getIdentityProviders();
  if (!identityProviders.isEmpty()) {
    providers=new LinkedList<IdentityProvider>();
    for (    IdentityProviderModel identityProvider : identityProviders) {
      if (identityProvider.isEnabled()) {
        String clientId=uriInfo.getQueryParameters().getFirst(OAuth2Constants.CLIENT_ID);
        if (clientId != null) {
          ClientModel clientModel=realm.findClient(clientId);
          if (clientModel != null && !clientModel.hasIdentityProvider(identityProvider.getId())) {
            continue;
          }
        }
        String loginUrl=Urls.identityProviderAuthnRequest(baseURI,identityProvider.getId(),realm.getName()).toString();
        providers.add(new IdentityProvider(identityProvider.getId(),identityProvider.getName(),loginUrl));
      }
    }
    if (!providers.isEmpty()) {
      displaySocial=true;
    }
  }
}
