{
  FacesContext ctx=FacesContext.getCurrentInstance();
  HttpServletRequest request=(HttpServletRequest)ctx.getExternalContext().getRequest();
  realm=(RealmModel)request.getAttribute(RealmModel.class.getName());
  if (RealmModel.DEFAULT_REALM.equals(realm.getName())) {
    name="Keycloak";
  }
 else {
    name=realm.getName();
  }
  view=ctx.getViewRoot().getViewId();
  view=view.substring(view.lastIndexOf('/') + 1,view.lastIndexOf('.'));
  loginUrl=((URI)request.getAttribute("KEYCLOAK_LOGIN_PAGE")).toString();
  loginAction=((URI)request.getAttribute("KEYCLOAK_LOGIN_ACTION")).toString();
  registrationUrl=((URI)request.getAttribute("KEYCLOAK_REGISTRATION_PAGE")).toString();
  registrationAction=((URI)request.getAttribute("KEYCLOAK_REGISTRATION_ACTION")).toString();
  socialLoginUrl=((URI)request.getAttribute("KEYCLOAK_SOCIAL_LOGIN")).toString();
  addRequiredCredentials();
  addFormData(request);
  addHiddenProperties(request,"client_id","scope","state","redirect_uri");
  addSocialProviders();
  addErrors(request);
  theme="default";
  themeUrl=FacesContext.getCurrentInstance().getExternalContext().getRequestContextPath() + "/sdk/theme/" + theme;
  themeConfig=new HashMap<String,Object>();
  themeConfig.put("styles",themeUrl + "/styles.css");
  if (RealmModel.DEFAULT_REALM.equals(realm.getName())) {
    themeConfig.put("logo",themeUrl + "/img/red-hat-logo.png");
    themeConfig.put("background",themeUrl + "/img/login-screen-background.jpg");
  }
 else {
    themeConfig.put("background",themeUrl + "/img/customer-login-screen-bg2.jpg");
    themeConfig.put("displayPoweredBy",true);
  }
}
