{
  ResteasyWebTarget target=client.target(config.getServerUrl());
  Form form=new Form().param("grant_type","refresh_token").param("username",config.getUsername()).param("password",config.getPassword());
  if (config.isPublicClient()) {
    form.param("client_id",config.getClientId());
  }
 else {
    target.register(new BasicAuthFilter(config.getClientId(),config.getClientSecret()));
  }
  TokenService tokenService=target.proxy(TokenService.class);
  AccessTokenResponse response=tokenService.refreshToken(config.getRealm(),form.asMap());
  defineCurrentToken(response);
  return response;
}
