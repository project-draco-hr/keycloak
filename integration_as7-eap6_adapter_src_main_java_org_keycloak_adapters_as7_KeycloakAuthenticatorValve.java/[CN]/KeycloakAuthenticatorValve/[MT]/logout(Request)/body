{
  KeycloakSecurityContext ksc=(KeycloakSecurityContext)request.getAttribute(KeycloakSecurityContext.class.getName());
  if (ksc != null) {
    request.removeAttribute(KeycloakSecurityContext.class.getName());
    Session session=request.getSessionInternal(false);
    if (session != null) {
      session.removeNote(KeycloakSecurityContext.class.getName());
      if (ksc instanceof RefreshableKeycloakSecurityContext) {
        ((RefreshableKeycloakSecurityContext)ksc).logout(deploymentContext.getDeployment());
      }
    }
  }
  super.logout(request);
}
