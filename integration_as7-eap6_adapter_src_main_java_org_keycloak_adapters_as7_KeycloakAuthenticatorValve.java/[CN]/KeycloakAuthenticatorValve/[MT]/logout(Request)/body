{
  KeycloakSecurityContext ksc=(KeycloakSecurityContext)request.getAttribute(KeycloakSecurityContext.class.getName());
  if (ksc != null) {
    request.removeAttribute(KeycloakSecurityContext.class.getName());
    CatalinaHttpFacade facade=new CatalinaHttpFacade(request,null);
    KeycloakDeployment deployment=deploymentContext.resolveDeployment(facade);
    if (ksc instanceof RefreshableKeycloakSecurityContext) {
      ((RefreshableKeycloakSecurityContext)ksc).logout(deployment);
    }
    AdapterTokenStore tokenStore=getTokenStore(request,facade,deployment);
    tokenStore.logout();
  }
  super.logout(request);
}
