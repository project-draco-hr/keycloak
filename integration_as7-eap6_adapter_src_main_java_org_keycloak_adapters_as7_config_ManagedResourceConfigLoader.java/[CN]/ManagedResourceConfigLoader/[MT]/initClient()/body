{
  int size=10;
  if (remoteSkeletonKeyConfig.getConnectionPoolSize() > 0)   size=remoteSkeletonKeyConfig.getConnectionPoolSize();
  ResteasyClientBuilder.HostnameVerificationPolicy policy=ResteasyClientBuilder.HostnameVerificationPolicy.WILDCARD;
  if (remoteSkeletonKeyConfig.isAllowAnyHostname())   policy=ResteasyClientBuilder.HostnameVerificationPolicy.ANY;
  ResteasyProviderFactory providerFactory=new ResteasyProviderFactory();
  ClassLoader old=Thread.currentThread().getContextClassLoader();
  Thread.currentThread().setContextClassLoader(ManagedResourceConfigLoader.class.getClassLoader());
  try {
    ResteasyProviderFactory.getInstance();
    RegisterBuiltin.register(providerFactory);
  }
  finally {
    Thread.currentThread().setContextClassLoader(old);
  }
  ResteasyClientBuilder builder=new ResteasyClientBuilder().providerFactory(providerFactory).connectionPoolSize(size).hostnameVerification(policy).keyStore(clientCertKeystore,remoteSkeletonKeyConfig.getClientKeyPassword());
  if (remoteSkeletonKeyConfig.isDisableTrustManager()) {
    builder.disableTrustManager();
  }
 else {
    builder.trustStore(truststore);
  }
  client=builder.build();
}
