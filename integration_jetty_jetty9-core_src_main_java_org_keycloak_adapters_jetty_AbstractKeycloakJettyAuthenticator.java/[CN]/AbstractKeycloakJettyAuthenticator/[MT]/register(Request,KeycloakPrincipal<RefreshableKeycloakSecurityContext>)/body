{
  request.setAttribute(AdapterDeploymentContext.class.getName(),deploymentContext);
  Authentication authentication=request.getAuthentication();
  if (!(authentication instanceof KeycloakAuthentication)) {
    UserIdentity userIdentity=createIdentity(principal);
    authentication=new KeycloakAuthentication(getAuthMethod(),userIdentity);
    request.setAuthentication(authentication);
  }
  return authentication;
}
