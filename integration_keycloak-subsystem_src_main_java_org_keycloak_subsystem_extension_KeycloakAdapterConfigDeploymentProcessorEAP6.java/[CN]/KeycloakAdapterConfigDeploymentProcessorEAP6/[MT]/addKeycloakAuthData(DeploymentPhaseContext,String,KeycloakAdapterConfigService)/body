{
  DeploymentUnit deploymentUnit=phaseContext.getDeploymentUnit();
  WarMetaData warMetaData=deploymentUnit.getAttachment(WarMetaData.ATTACHMENT_KEY);
  addJSONData(service.getJSON(deploymentName),warMetaData);
  JBossWebMetaData webMetaData=warMetaData.getMergedJBossWebMetaData();
  if (webMetaData == null) {
    webMetaData=new JBossWebMetaData();
    warMetaData.setMergedJBossWebMetaData(webMetaData);
  }
  addValve(webMetaData);
  LoginConfigMetaData loginConfig=webMetaData.getLoginConfig();
  if (loginConfig == null) {
    loginConfig=new LoginConfigMetaData();
    webMetaData.setLoginConfig(loginConfig);
  }
  loginConfig.setAuthMethod("KEYCLOAK");
  loginConfig.setRealmName(service.getRealmName(deploymentName));
  KeycloakLogger.ROOT_LOGGER.deploymentSecured(deploymentName);
}
