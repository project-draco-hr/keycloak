{
  HttpClient client=new HttpClientBuilder().build(adapterConfig);
  oauthClient.setClient(client);
  oauthClient.setClientId(adapterConfig.getResource());
  oauthClient.setPublicClient(adapterConfig.isPublicClient());
  oauthClient.setCredentials(adapterConfig.getCredentials());
  if (adapterConfig.getAuthServerUrl() == null) {
    throw new RuntimeException("You must specify auth-url");
  }
  KeycloakUriBuilder serverBuilder=KeycloakUriBuilder.fromUri(adapterConfig.getAuthServerUrl());
  RelativeUrlsUsed useRelative=relativeUrls(serverBuilder,adapterConfig);
  oauthClient.setRelativeUrlsUsed(useRelative);
  String authUrl=serverBuilder.clone().path(ServiceUrlConstants.TOKEN_SERVICE_LOGIN_PATH).build(adapterConfig.getRealm()).toString();
  KeycloakUriBuilder tokenUrlBuilder;
  KeycloakUriBuilder refreshUrlBuilder;
  if (useRelative == RelativeUrlsUsed.BROWSER_ONLY) {
    KeycloakUriBuilder nonBrowsersServerBuilder=KeycloakUriBuilder.fromUri(adapterConfig.getAuthServerUrlForBackendRequests());
    tokenUrlBuilder=nonBrowsersServerBuilder.clone();
    refreshUrlBuilder=nonBrowsersServerBuilder.clone();
  }
 else {
    tokenUrlBuilder=serverBuilder.clone();
    refreshUrlBuilder=serverBuilder.clone();
  }
  String tokenUrl=tokenUrlBuilder.path(ServiceUrlConstants.TOKEN_SERVICE_ACCESS_CODE_PATH).build(adapterConfig.getRealm()).toString();
  String refreshUrl=refreshUrlBuilder.path(ServiceUrlConstants.TOKEN_SERVICE_REFRESH_PATH).build(adapterConfig.getRealm()).toString();
  oauthClient.setAuthUrl(authUrl);
  oauthClient.setCodeUrl(tokenUrl);
  oauthClient.setRefreshUrl(refreshUrl);
}
