{
  UndertowHttpFacade facade=new UndertowHttpFacade(exchange);
  KeycloakDeployment deployment=deploymentContext.resolveDeployment(facade);
  if (deployment != null && deployment.isConfigured()) {
    final ServletRequestContext servletRequestContext=exchange.getAttachment(ServletRequestContext.ATTACHMENT_KEY);
    SessionManagementBridge bridge=new SessionManagementBridge(userSessionManagement,servletRequestContext.getDeployment().getSessionManager());
    PreAuthActionsHandler handler=new PreAuthActionsHandler(bridge,deployment,facade);
    if (handler.handleRequest())     return;
  }
  next.handleRequest(exchange);
}
