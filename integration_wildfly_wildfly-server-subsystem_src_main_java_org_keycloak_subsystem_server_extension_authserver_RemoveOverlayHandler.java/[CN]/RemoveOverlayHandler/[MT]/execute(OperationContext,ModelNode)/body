{
  final ModelNode model=new ModelNode();
  OVERLAY_FILE_PATH.validateAndSet(operation,model);
  REDEPLOY_SERVER.validateAndSet(operation,model);
  String overlayName=AuthServerUtil.getOverlayName(operation);
  boolean isOverlayExists=AuthServerUtil.isOverlayExists(context,overlayName,PathAddress.EMPTY_ADDRESS);
  String overlayPath=OVERLAY_FILE_PATH.resolveModelAttribute(context,model).asString();
  if (isOverlayExists) {
    PathAddress overlayAddress=AuthServerUtil.getOverlayAddress(overlayName);
    AbstractAddOverlayHandler.removeContent(context,overlayAddress,overlayPath);
  }
 else {
    context.setRollbackOnly();
    throw new OperationFailedException("Overlay path " + overlayPath + " not found.");
  }
  boolean isRedeploy=AbstractAddOverlayHandler.isRedeploy(context,operation);
  String deploymentName=AuthServerUtil.getDeploymentName(operation);
  if (isRedeploy)   AuthServerUtil.addStepToRedeployAuthServer(context,deploymentName);
  if (!isRedeploy)   context.restartRequired();
}
