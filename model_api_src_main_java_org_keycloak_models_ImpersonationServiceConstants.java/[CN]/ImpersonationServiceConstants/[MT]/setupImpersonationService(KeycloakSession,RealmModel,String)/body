{
  ClientModel client=realm.getClientNameMap().get(Constants.IMPERSONATION_SERVICE_CLIENT_ID);
  if (client == null) {
    client=KeycloakModelUtils.createClient(realm,Constants.IMPERSONATION_SERVICE_CLIENT_ID);
    client.setName("${client_" + Constants.IMPERSONATION_SERVICE_CLIENT_ID + "}");
    client.setEnabled(true);
    client.setFullScopeAllowed(false);
    String base=contextPath + "/realms/" + realm.getName()+ "/impersonate";
    String redirectUri=base + "/*";
    client.addRedirectUri(redirectUri);
    client.setBaseUrl(base);
    setupMasterRealmRole(session.realms(),realm);
    setupRealmRole(realm);
  }
}
