{
  AuthenticationFlowModel browser=new AuthenticationFlowModel();
  browser.setAlias(BROWSER_FLOW);
  browser.setDescription("browser based authentication");
  browser.setProviderId("basic-flow");
  browser=realm.addAuthenticationFlow(browser);
  AuthenticationExecutionModel execution=new AuthenticationExecutionModel();
  execution.setParentFlow(browser.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.ALTERNATIVE);
  execution.setAuthenticator("auth-cookie");
  execution.setPriority(10);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(browser.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.DISABLED);
  execution.setAuthenticator("auth-spnego");
  execution.setPriority(20);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  AuthenticationFlowModel forms=new AuthenticationFlowModel();
  forms.setAlias(FORMS_FLOW);
  forms.setDescription("Username, password, otp and other auth forms.");
  forms.setProviderId("basic-flow");
  forms=realm.addAuthenticationFlow(forms);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(browser.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.ALTERNATIVE);
  execution.setFlowId(forms.getId());
  execution.setPriority(30);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(true);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(forms.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("auth-username-password-form");
  execution.setPriority(10);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(forms.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.OPTIONAL);
  execution.setAuthenticator("auth-otp-form");
  execution.setPriority(20);
  execution.setUserSetupAllowed(true);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
}
