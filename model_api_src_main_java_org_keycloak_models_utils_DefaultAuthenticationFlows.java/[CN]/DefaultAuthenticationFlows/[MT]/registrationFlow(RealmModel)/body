{
  AuthenticationFlowModel registrationFlow=new AuthenticationFlowModel();
  registrationFlow.setAlias(REGISTRATION_FLOW);
  registrationFlow.setDescription("registration flow");
  registrationFlow.setProviderId("basic-flow");
  registrationFlow=realm.addAuthenticationFlow(registrationFlow);
  AuthenticationFlowModel registrationFormFlow=new AuthenticationFlowModel();
  registrationFormFlow.setAlias(REGISTRATION_FORM_FLOW);
  registrationFormFlow.setDescription("registration form");
  registrationFormFlow.setProviderId("form-flow");
  registrationFormFlow=realm.addAuthenticationFlow(registrationFormFlow);
  AuthenticationExecutionModel execution=new AuthenticationExecutionModel();
  execution.setParentFlow(registrationFlow.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("registration-page-form");
  execution.setPriority(10);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(true);
  execution.setFlowId(registrationFormFlow.getId());
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(registrationFormFlow.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("username-validation-action");
  execution.setPriority(20);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(registrationFormFlow.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("profile-validation-action");
  execution.setPriority(30);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(registrationFormFlow.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("password-validation-action");
  execution.setPriority(40);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
  execution=new AuthenticationExecutionModel();
  execution.setParentFlow(registrationFormFlow.getId());
  execution.setRequirement(AuthenticationExecutionModel.Requirement.REQUIRED);
  execution.setAuthenticator("registration-user-creation");
  execution.setPriority(50);
  execution.setUserSetupAllowed(false);
  execution.setAutheticatorFlow(false);
  realm.addAuthenticatorExecution(execution);
}
