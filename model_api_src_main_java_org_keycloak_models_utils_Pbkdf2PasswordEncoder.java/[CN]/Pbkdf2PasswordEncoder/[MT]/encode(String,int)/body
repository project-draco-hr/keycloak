{
  String encodedPassword;
  KeySpec spec=new PBEKeySpec(rawPassword.toCharArray(),salt,iterations,DERIVED_KEY_SIZE);
  try {
    byte[] key=getSecretKeyFactory().generateSecret(spec).getEncoded();
    encodedPassword=Base64.encodeBytes(key);
  }
 catch (  InvalidKeySpecException e) {
    throw new RuntimeException("Credential could not be encoded");
  }
  return encodedPassword;
}
