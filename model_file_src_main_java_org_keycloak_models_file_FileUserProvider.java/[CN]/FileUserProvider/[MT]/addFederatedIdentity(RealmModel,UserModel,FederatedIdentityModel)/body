{
  UserAdapter userAdapter=(UserAdapter)getUserById(user.getId(),realm);
  UserEntity userEntity=userAdapter.getUserEntity();
  FederatedIdentityEntity federatedIdentityEntity=new FederatedIdentityEntity();
  federatedIdentityEntity.setIdentityProvider(socialLink.getIdentityProvider());
  federatedIdentityEntity.setUserId(socialLink.getUserId());
  federatedIdentityEntity.setUserName(socialLink.getUserName().toLowerCase());
  for (  FederatedIdentityEntity fedIdent : userEntity.getFederatedIdentities()) {
    if (fedIdent.equals(federatedIdentityEntity))     return;
  }
  userEntity.getFederatedIdentities().add(federatedIdentityEntity);
}
