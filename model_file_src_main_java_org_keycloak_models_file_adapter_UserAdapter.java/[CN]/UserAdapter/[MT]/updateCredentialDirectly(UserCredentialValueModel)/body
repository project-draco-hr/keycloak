{
  CredentialEntity credentialEntity=getCredentialEntity(user,credModel.getType());
  if (credentialEntity == null) {
    credentialEntity=new CredentialEntity();
    credentialEntity.setType(credModel.getType());
    credModel.setCreatedDate(credModel.getCreatedDate());
    user.getCredentials().add(credentialEntity);
  }
  credentialEntity.setValue(credModel.getValue());
  credentialEntity.setSalt(credModel.getSalt());
  credentialEntity.setDevice(credModel.getDevice());
  credentialEntity.setHashIterations(credModel.getHashIterations());
  credentialEntity.setCounter(credModel.getCounter());
  credentialEntity.setAlgorithm(credModel.getAlgorithm());
  credentialEntity.setDigits(credModel.getDigits());
}
