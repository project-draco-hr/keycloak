{
  Client client=realm.findClient(clientId);
  if (client instanceof Application) {
    return provider.mappings().wrap((Application)client);
  }
 else   if (client instanceof OAuthClient) {
    return provider.mappings().wrap((OAuthClient)client);
  }
 else {
    throw new IllegalArgumentException("Unsupported client type");
  }
}
