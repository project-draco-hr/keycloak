{
  if (provider.users().supports(Feature.UPDATE_CREDENTIALS)) {
    Credentials credentials=new Credentials(model.getType(),model.getSalt(),model.getValue(),model.getHashIterations(),model.getDevice());
    user.updateCredential(credentials);
  }
 else {
    throw new IllegalStateException("Users provider doesn't support updating credentials");
  }
}
