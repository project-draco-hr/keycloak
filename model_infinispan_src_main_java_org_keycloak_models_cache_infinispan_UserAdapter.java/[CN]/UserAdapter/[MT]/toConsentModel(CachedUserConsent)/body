{
  ClientModel client=keycloakSession.realms().getClientById(cachedConsent.getClientDbId(),realm);
  if (client == null) {
    return null;
  }
  UserConsentModel consentModel=new UserConsentModel(client);
  for (  String roleId : cachedConsent.getRoleIds()) {
    RoleModel role=keycloakSession.realms().getRoleById(roleId,realm);
    if (role != null) {
      consentModel.addGrantedRole(role);
    }
  }
  for (  ProtocolMapperModel protocolMapper : cachedConsent.getProtocolMappers()) {
    consentModel.addGrantedProtocolMapper(protocolMapper);
  }
  return consentModel;
}
