{
  CachedRealm cached=cache.getCachedRealmByName(name);
  if (cached != null) {
    logger.tracev("by name cache hit: {0}",cached.getName());
  }
  if (cached == null) {
    Long loaded=UpdateCounter.current();
    RealmModel model=getDelegate().getRealmByName(name);
    if (model == null)     return null;
    if (realmInvalidations.contains(model.getId()))     return model;
    cached=new RevisionedCachedRealm(loaded,cache,this,model);
    logger.tracev("try caching realm: {0}",cached.getName());
    cache.addCachedRealm(cached);
  }
 else   if (realmInvalidations.contains(cached.getId())) {
    return getDelegate().getRealmByName(name);
  }
 else   if (managedRealms.containsKey(cached.getId())) {
    return managedRealms.get(cached.getId());
  }
  RealmAdapter adapter=new RealmAdapter(cached,this);
  managedRealms.put(cached.getId(),adapter);
  return adapter;
}
