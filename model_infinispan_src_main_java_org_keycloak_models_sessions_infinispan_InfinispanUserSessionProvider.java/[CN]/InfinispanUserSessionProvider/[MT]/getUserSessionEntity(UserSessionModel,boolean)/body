{
  if (userSession instanceof UserSessionAdapter) {
    return ((UserSessionAdapter)userSession).getEntity();
  }
 else {
    Cache<String,SessionEntity> cache=getCache(offline);
    return (UserSessionEntity)cache.get(userSession.getId());
  }
}
