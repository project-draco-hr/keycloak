{
  if (isRegisteredForInvalidation(realm,user.getId())) {
    return getDelegate().getOfflineClientSession(realm,user,clientSessionId);
  }
  CachedUser cachedUser=cache.getCachedUser(realm.getId(),user.getId());
  if (cachedUser == null) {
    return getDelegate().getOfflineClientSession(realm,user,clientSessionId);
  }
 else {
    return cachedUser.getOfflineClientSessions().get(clientSessionId);
  }
}
