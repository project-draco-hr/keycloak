{
  if (isRegisteredForInvalidation(realm,user.getId())) {
    return getDelegate().getOfflineUserSessions(realm,user);
  }
  CachedUser cachedUser=cache.getCachedUser(realm.getId(),user.getId());
  if (cachedUser == null) {
    return getDelegate().getOfflineUserSessions(realm,user);
  }
 else {
    return cachedUser.getOfflineUserSessions().values();
  }
}
