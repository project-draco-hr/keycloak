{
  if (userCache == null) {
synchronized (this) {
      if (userCache == null) {
        Cache<String,CachedUser> cache=session.getProvider(InfinispanConnectionProvider.class).getCache(InfinispanConnectionProvider.USER_CACHE_NAME);
        cache.addListener(new CacheListener());
        userCache=new InfinispanUserCache(cache,usernameLookup,emailLookup);
      }
    }
  }
}
