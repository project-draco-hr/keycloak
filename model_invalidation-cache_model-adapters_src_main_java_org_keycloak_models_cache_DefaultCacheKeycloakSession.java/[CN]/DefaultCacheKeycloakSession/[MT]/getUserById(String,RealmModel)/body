{
  CachedUser cached=cache.getCachedUser(id);
  if (cached == null) {
    UserModel model=getDelegate().getUserById(id,realm);
    if (model == null)     return null;
    if (userInvalidations.contains(id))     return model;
    cached=new CachedUser(realm,model);
    cache.addCachedUser(cached);
  }
 else   if (userInvalidations.contains(id)) {
    return getDelegate().getUserById(id,realm);
  }
 else   if (managedUsers.containsKey(id)) {
    return managedUsers.get(id);
  }
  UserAdapter adapter=new UserAdapter(cached,cache,this,realm);
  managedUsers.put(id,adapter);
  return adapter;
}
