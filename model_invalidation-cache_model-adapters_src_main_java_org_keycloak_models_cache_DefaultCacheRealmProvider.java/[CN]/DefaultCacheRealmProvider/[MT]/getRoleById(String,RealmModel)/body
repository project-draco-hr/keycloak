{
  if (!cache.isEnabled())   return getDelegate().getRoleById(id,realm);
  CachedRole cached=cache.getRole(id);
  if (cached == null) {
    RoleModel model=getDelegate().getRoleById(id,realm);
    if (model == null)     return null;
    if (roleInvalidations.contains(id))     return model;
    if (model.getContainer() instanceof ApplicationModel) {
      cached=new CachedApplicationRole(((ApplicationModel)model.getContainer()).getId(),model);
    }
 else {
      cached=new CachedRealmRole(model);
    }
    cache.addCachedRole(cached);
  }
 else   if (roleInvalidations.contains(id)) {
    return getDelegate().getRoleById(id,realm);
  }
 else   if (managedRoles.containsKey(id)) {
    return managedRoles.get(id);
  }
  RoleAdapter adapter=new RoleAdapter(cached,cache,this,realm);
  managedRoles.put(id,adapter);
  return adapter;
}
