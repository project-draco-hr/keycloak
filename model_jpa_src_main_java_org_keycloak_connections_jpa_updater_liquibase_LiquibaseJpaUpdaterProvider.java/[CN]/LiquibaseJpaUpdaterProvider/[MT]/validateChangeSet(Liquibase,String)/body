{
  List<ChangeSet> changeSets=liquibase.listUnrunChangeSets((Contexts)null);
  if (!changeSets.isEmpty()) {
    List<RanChangeSet> ranChangeSets=liquibase.getDatabase().getRanChangeSetList();
    String errorMessage=String.format("Failed to validate database schema. Schema needs updating database from %s to %s. Please change databaseSchema to 'update' or use other database. Used changelog was %s",ranChangeSets.get(ranChangeSets.size() - 1).getId(),changeSets.get(changeSets.size() - 1).getId(),changelog);
    throw new RuntimeException(errorMessage);
  }
 else {
    logger.debugf("Validation passed. Database is up-to-date for changelog %s",changelog);
  }
}
