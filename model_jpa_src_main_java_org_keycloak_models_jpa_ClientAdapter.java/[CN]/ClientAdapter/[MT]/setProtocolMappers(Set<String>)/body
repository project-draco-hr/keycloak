{
  Collection<ProtocolMapperEntity> entities=entity.getProtocolMappers();
  Iterator<ProtocolMapperEntity> it=entities.iterator();
  Set<String> already=new HashSet<String>();
  while (it.hasNext()) {
    ProtocolMapperEntity mapper=it.next();
    if (mappings.contains(mapper.getId())) {
      already.add(mapper.getId());
      continue;
    }
    it.remove();
  }
  for (  String id : mappings) {
    if (!already.contains(id)) {
      ProtocolMapperEntity mapping=em.find(ProtocolMapperEntity.class,id);
      if (mapping != null) {
        entities.add(mapping);
      }
    }
  }
  em.flush();
}
