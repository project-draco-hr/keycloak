{
  AuthenticationExecutionEntity entity=new AuthenticationExecutionEntity();
  entity.setId(KeycloakModelUtils.generateId());
  entity.setAuthenticator(model.getAuthenticator());
  entity.setPriority(model.getPriority());
  entity.setFlowId(model.getFlowId());
  entity.setRequirement(model.getRequirement());
  AuthenticationFlowEntity flow=em.find(AuthenticationFlowEntity.class,model.getParentFlow());
  entity.setParentFlow(flow);
  flow.getExecutions().add(entity);
  entity.setRealm(realm);
  entity.setUserSetupAllowed(model.isUserSetupAllowed());
  entity.setAutheticatorFlow(model.isAutheticatorFlow());
  em.persist(entity);
  em.flush();
  model.setId(entity.getId());
  return model;
}
