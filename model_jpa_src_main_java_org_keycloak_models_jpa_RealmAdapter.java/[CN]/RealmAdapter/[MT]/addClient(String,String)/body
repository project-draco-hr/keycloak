{
  ClientEntity entity=new ClientEntity();
  entity.setId(id);
  entity.setClientId(clientId);
  entity.setEnabled(true);
  entity.setRealm(realm);
  realm.getClients().add(entity);
  em.persist(entity);
  em.flush();
  final ClientModel resource=new ClientAdapter(this,em,session,entity);
  em.flush();
  session.getKeycloakSessionFactory().publish(new ClientCreationEvent(){
    @Override public ClientModel getCreatedClient(){
      return resource;
    }
  }
);
  return resource;
}
