{
  AuthenticationLinkEntity entity=new AuthenticationLinkEntity();
  entity.setAuthProvider(authenticationLink.getAuthProvider());
  entity.setAuthUserId(authenticationLink.getAuthUserId());
  entity.setUser(user);
  if (user.getAuthenticationLink() == null) {
    user.setAuthenticationLink(new LinkedList<AuthenticationLinkEntity>());
  }
 else   if (!user.getAuthenticationLink().isEmpty()) {
    AuthenticationLinkEntity old=user.getAuthenticationLink().iterator().next();
    user.getAuthenticationLink().clear();
    em.remove(old);
  }
  user.getAuthenticationLink().add(entity);
  em.persist(entity);
  em.flush();
}
