{
  UserCredentialValueModel encoded=PasswordHashManager.encode(session,realm,cred.getValue());
  credentialEntity.setCreatedDate(Time.toMillis(Time.currentTime()));
  credentialEntity.setAlgorithm(encoded.getAlgorithm());
  credentialEntity.setValue(encoded.getValue());
  credentialEntity.setSalt(encoded.getSalt());
  credentialEntity.setHashIterations(encoded.getHashIterations());
}
