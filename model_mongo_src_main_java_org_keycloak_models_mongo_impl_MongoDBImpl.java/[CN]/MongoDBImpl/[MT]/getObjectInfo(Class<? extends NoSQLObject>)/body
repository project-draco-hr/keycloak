{
  ObjectInfo objectInfo=objectInfoCache.get(objectClass);
  if (objectInfo == null) {
    Property<String> idProperty=PropertyQueries.<String>createQuery(objectClass).addCriteria(new AnnotatedPropertyCriteria(NoSQLId.class)).getFirstResult();
    List<Property<Object>> properties=PropertyQueries.createQuery(objectClass).addCriteria(new AnnotatedPropertyCriteria(NoSQLField.class)).getResultList();
    NoSQLCollection classAnnotation=objectClass.getAnnotation(NoSQLCollection.class);
    String dbCollectionName=classAnnotation == null ? null : classAnnotation.collectionName();
    objectInfo=new ObjectInfo(objectClass,dbCollectionName,idProperty,properties);
    ObjectInfo existing=objectInfoCache.putIfAbsent(objectClass,objectInfo);
    if (existing != null) {
      objectInfo=existing;
    }
  }
  return objectInfo;
}
