{
  this.database=database;
  typeConverter=new TypeConverter();
  for (  Class<?> simpleConverterClass : SIMPLE_TYPES) {
    SimpleConverter converter=new SimpleConverter(simpleConverterClass);
    typeConverter.addAppObjectConverter(converter);
    typeConverter.addDBObjectConverter(converter);
  }
  typeConverter.addAppObjectConverter(new ListConverter(typeConverter,ArrayList.class));
  typeConverter.addAppObjectConverter(new ListConverter(typeConverter,List.class));
  typeConverter.addDBObjectConverter(new BasicDBListConverter(typeConverter));
  typeConverter.addAppObjectConverter(new MapConverter(HashMap.class));
  typeConverter.addAppObjectConverter(new MapConverter(Map.class));
  typeConverter.addDBObjectConverter(new BasicDBObjectToMapConverter());
  typeConverter.addAppObjectConverter(new EnumToStringConverter());
  typeConverter.addDBObjectConverter(new StringToEnumConverter());
  for (  Class<? extends MongoEntity> type : managedEntityTypes) {
    getObjectInfo(type);
    typeConverter.addAppObjectConverter(new MongoEntityConverter(this,typeConverter,type));
    typeConverter.addDBObjectConverter(new BasicDBObjectConverter(this,typeConverter,type));
  }
  if (clearCollectionsOnStartup) {
    clearManagedCollections(managedEntityTypes);
  }
}
