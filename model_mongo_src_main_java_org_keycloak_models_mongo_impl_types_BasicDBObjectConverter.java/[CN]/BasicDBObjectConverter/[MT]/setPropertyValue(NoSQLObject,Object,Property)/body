{
  if (valueFromDB == null) {
    property.setValue(object,null);
    return;
  }
  Class<?> expectedReturnType=property.getJavaClass();
  expectedReturnType=Types.boxedClass(expectedReturnType);
  Object appObject=typeConverter.convertDBObjectToApplicationObject(valueFromDB,expectedReturnType);
  if (Types.boxedClass(property.getJavaClass()).isAssignableFrom(appObject.getClass())) {
    property.setValue(object,appObject);
  }
 else {
    throw new IllegalStateException("Converted object " + appObject + " is not of type "+ expectedReturnType+ ". So can't be assigned as property "+ property.getName()+ " of "+ object.getClass());
  }
}
