{
  DBObject query=new QueryBuilder().and("realmId").is(realm.getId()).and("offlineUserSessions.offlineClientSessions.clientId").is(client.getId()).get();
  DBObject sort=new BasicDBObject("username",1);
  List<MongoUserEntity> users=getMongoStore().loadEntities(MongoUserEntity.class,query,sort,firstResult,maxResults,invocationContext);
  List<OfflineClientSessionModel> result=new LinkedList<>();
  for (  MongoUserEntity user : users) {
    for (    OfflineUserSessionEntity userSession : user.getOfflineUserSessions()) {
      for (      OfflineClientSessionEntity clSession : userSession.getOfflineClientSessions()) {
        if (clSession.getClientId().equals(client.getId())) {
          OfflineClientSessionModel model=toModel(clSession,user.getId(),userSession.getUserSessionId());
          result.add(model);
        }
      }
    }
  }
  return result;
}
