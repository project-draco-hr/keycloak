{
  NoSQLQuery query=noSQL.createQueryBuilder().andCondition("userId",user.getId()).build();
  noSQL.removeObjects(PasswordData.class,query);
  PasswordData passwordData=new PasswordData();
  String passwordSalt=generateSalt();
  passwordData.setSalt(passwordSalt);
  passwordData.setEncodedHash(this.passwordEncoder.encode(saltPassword(password,passwordSalt)));
  if (effectiveDate != null) {
    passwordData.setEffectiveDate(effectiveDate);
  }
  passwordData.setExpiryDate(expiryDate);
  passwordData.setUserId(user.getId());
  noSQL.saveObject(passwordData);
}
