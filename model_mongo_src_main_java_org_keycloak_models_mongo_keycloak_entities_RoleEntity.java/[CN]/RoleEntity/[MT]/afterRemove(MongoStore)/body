{
  DBObject query=new QueryBuilder().and("roleIds").is(id).get();
  List<UserEntity> users=mongoStore.loadObjects(UserEntity.class,query);
  for (  UserEntity user : users) {
    logger.info("Removing role " + getName() + " from user "+ user.getLoginName());
    mongoStore.pullItemFromList(user,"roleIds",getId());
  }
  query=new QueryBuilder().and("scopeIds").is(id).get();
  users=mongoStore.loadObjects(UserEntity.class,query);
  for (  UserEntity user : users) {
    logger.info("Removing scope " + getName() + " from user "+ user.getLoginName());
    mongoStore.pullItemFromList(user,"scopeIds",getId());
  }
  if (realmId != null) {
    RealmEntity realmEntity=mongoStore.loadObject(RealmEntity.class,realmId);
    if (realmEntity != null) {
      mongoStore.pullItemFromList(realmEntity,"defaultRoles",getId());
    }
  }
  if (applicationId != null) {
    ApplicationEntity appEntity=mongoStore.loadObject(ApplicationEntity.class,applicationId);
    if (appEntity != null) {
      mongoStore.pullItemFromList(appEntity,"defaultRoles",getId());
    }
  }
  query=new QueryBuilder().and("compositeRoleIds").is(getId()).get();
  List<RoleEntity> parentRoles=mongoStore.loadObjects(RoleEntity.class,query);
  for (  RoleEntity role : parentRoles) {
    mongoStore.pullItemFromList(role,"compositeRoleIds",getId());
  }
}
