{
  QueryParameter[] params=new QueryParameter[]{User.LOGIN_NAME,User.FIRST_NAME,User.LAST_NAME,User.EMAIL};
  Map<String,User> users=new HashMap<String,User>();
  for (  QueryParameter p : params) {
    IdentityQuery<User> query=getIdm().createIdentityQuery(User.class);
    query.setParameter(p,search.toLowerCase());
    for (    User u : query.getResultList()) {
      users.put(u.getLoginName(),u);
    }
  }
  List<UserModel> userModels=new ArrayList<UserModel>();
  for (  User user : users.values()) {
    userModels.add(new UserAdapter(user,idm));
  }
  return userModels;
}
