{
  if (entity.getUserSession() != null) {
    if (entity.getUserSession().equals(userSession.getId())) {
      return;
    }
 else {
      provider.dettachSession(userSession,this);
    }
  }
 else {
    provider.attachSession(userSession,this);
  }
  entity.setUserSession(userSession.getId());
  update();
}
