{
  int maxTime=Time.currentTime() - realm.getSsoSessionMaxLifespan();
  int idleTime=Time.currentTime() - realm.getSsoSessionIdleTimeout();
  int dettachedClientSessionExpired=Time.currentTime() - RealmInfoUtil.getDettachedClientSessionLifespan(realm);
  em.createNamedQuery("removeDetachedClientSessionRoleByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",dettachedClientSessionExpired).executeUpdate();
  em.createNamedQuery("removeDetachedClientSessionNoteByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",dettachedClientSessionExpired).executeUpdate();
  em.createNamedQuery("removeDetachedClientSessionByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",dettachedClientSessionExpired).executeUpdate();
  em.createNamedQuery("removeClientSessionRoleByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",maxTime).setParameter("idleTime",idleTime).executeUpdate();
  em.createNamedQuery("removeClientSessionNoteByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",maxTime).setParameter("idleTime",idleTime).executeUpdate();
  em.createNamedQuery("removeClientSessionByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",maxTime).setParameter("idleTime",idleTime).executeUpdate();
  em.createNamedQuery("removeUserSessionNoteByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",maxTime).setParameter("idleTime",idleTime).executeUpdate();
  em.createNamedQuery("removeUserSessionByExpired").setParameter("realmId",realm.getId()).setParameter("maxTime",maxTime).setParameter("idleTime",idleTime).executeUpdate();
}
