{
  UserSessionModel userSession=provider.createUserSession(realm,user,"127.0.0.1");
  commit();
  assertNotNull(provider.getUserSession(realm,userSession.getId()));
  commit();
  provider.removeUserSession(realm,provider.getUserSession(realm,userSession.getId()));
  commit();
  assertNull(provider.getUserSession(realm,userSession.getId()));
  userSession=provider.createUserSession(realm,user,"127.0.0.1");
  commit();
  provider.removeUserSessions(realm,user);
  commit();
  assertNull(provider.getUserSession(realm,userSession.getId()));
  userSession=provider.createUserSession(realm,user,"127.0.0.1");
  commit();
  Thread.sleep(2000);
  provider.removeExpiredUserSessions(realm);
  commit();
  assertNull(provider.getUserSession(realm,userSession.getId()));
}
