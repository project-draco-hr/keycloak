{
  try {
    IdentityManager identityManager=new PicketlinkAuthenticationProvider(providerSession.getProvider(IdentityManagerProvider.class)).getIdentityManager(realm);
    User user=BasicModel.getUser(identityManager,username);
    identityManager.updateCredential(user,new Password(password.toCharArray()));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
