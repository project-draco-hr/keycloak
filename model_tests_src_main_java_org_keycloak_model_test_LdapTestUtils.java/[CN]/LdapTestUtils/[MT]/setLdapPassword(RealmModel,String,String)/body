{
  KeycloakRegistry registry=ResteasyProviderFactory.getContextData(KeycloakRegistry.class);
  if (registry == null) {
    ResteasyProviderFactory.pushContext(KeycloakRegistry.class,new KeycloakRegistry());
  }
  try {
    IdentityManager identityManager=new PicketlinkAuthenticationProvider().getIdentityManager(realm);
    User user=BasicModel.getUser(identityManager,username);
    identityManager.updateCredential(user,new Password(password.toCharArray()));
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
