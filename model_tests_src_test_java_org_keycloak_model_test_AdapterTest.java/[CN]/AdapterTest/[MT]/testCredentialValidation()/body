{
  test1CreateRealm();
  UserModel user=realmManager.getSession().users().addUser(realmModel,"bburke");
  UserCredentialModel cred=new UserCredentialModel();
  cred.setType(CredentialRepresentation.PASSWORD);
  cred.setValue("geheim");
  user.updateCredential(cred);
  Assert.assertTrue(realmModel.validatePassword(user,"geheim"));
  List<UserCredentialValueModel> creds=user.getCredentialsDirectly();
  Assert.assertEquals(creds.get(0).getHashIterations(),1);
  realmModel.setPasswordPolicy(new PasswordPolicy("hashIterations(200)"));
  Assert.assertTrue(realmModel.validatePassword(user,"geheim"));
  creds=user.getCredentialsDirectly();
  Assert.assertEquals(creds.get(0).getHashIterations(),200);
  realmModel.setPasswordPolicy(new PasswordPolicy("hashIterations(1)"));
}
