{
  test1CreateRealm();
  UserModel user=realmModel.addUser("bburke");
  user.setAttribute("attr1","val1");
  user.addRequiredAction(UserModel.RequiredAction.UPDATE_PASSWORD);
  RoleModel testRole=realmModel.addRole("test");
  user.grantRole(testRole);
  ApplicationModel app=realmModel.addApplication("test-app");
  RoleModel appRole=app.addRole("test");
  user.grantRole(appRole);
  SocialLinkModel socialLink=new SocialLinkModel("google","google1",user.getUsername());
  realmModel.addSocialLink(user,socialLink);
  UserCredentialModel cred=new UserCredentialModel();
  cred.setType(CredentialRepresentation.PASSWORD);
  cred.setValue("password");
  user.updateCredential(cred);
  commit();
  realmModel=session.getRealm("JUGGLER");
  Assert.assertTrue(realmModel.removeUser("bburke"));
  Assert.assertFalse(realmModel.removeUser("bburke"));
  assertNull(realmModel.getUser("bburke"));
}
