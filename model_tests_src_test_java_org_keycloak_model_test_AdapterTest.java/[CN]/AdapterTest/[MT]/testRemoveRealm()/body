{
  test1CreateRealm();
  UserModel user=realmModel.addUser("bburke");
  UserCredentialModel cred=new UserCredentialModel();
  cred.setType(CredentialRepresentation.PASSWORD);
  cred.setValue("password");
  realmModel.updateCredential(user,cred);
  OAuthClientModel client=realmModel.addOAuthClient("client");
  ApplicationModel app=realmModel.addApplication("test-app");
  RoleModel appRole=app.addRole("test");
  realmModel.grantRole(user,appRole);
  realmModel.addScopeMapping(client,appRole);
  RoleModel realmRole=realmModel.addRole("test");
  RoleModel realmRole2=realmModel.addRole("test2");
  realmRole.addCompositeRole(realmRole2);
  realmRole.addCompositeRole(appRole);
  realmModel.addScopeMapping(app,realmRole);
  Assert.assertTrue(realmManager.removeRealm(realmModel));
  Assert.assertFalse(realmManager.removeRealm(realmModel));
  Assert.assertNull(realmManager.getRealm(realmModel.getId()));
}
