{
  realmManager.createRealm("userSessions");
  realmManager.getRealmByName("userSessions").setSsoSessionIdleTimeout(5);
  UserModel user=realmManager.getRealmByName("userSessions").addUser("userSessions1");
  UserSessionModel userSession=realmManager.getRealmByName("userSessions").createUserSession(user,"127.0.0.1");
  commit();
  assertNotNull(realmManager.getRealmByName("userSessions").getUserSession(userSession.getId()));
  commit();
  realmManager.getRealmByName("userSessions").removeUserSession(realmManager.getRealmByName("userSessions").getUserSession(userSession.getId()));
  commit();
  assertNull(realmManager.getRealmByName("userSessions").getUserSession(userSession.getId()));
  userSession=realmManager.getRealmByName("userSessions").createUserSession(user,"127.0.0.1");
  commit();
  realmManager.getRealmByName("userSessions").removeUserSessions(user);
  commit();
  assertNull(realmManager.getRealmByName("userSessions").getUserSession(userSession.getId()));
  realmManager.getRealmByName("userSessions").setSsoSessionIdleTimeout(1);
  userSession=realmManager.getRealmByName("userSessions").createUserSession(user,"127.0.0.1");
  commit();
  Thread.sleep(2000);
  realmManager.getRealmByName("userSessions").removeExpiredUserSessions();
  commit();
  assertNull(realmManager.getRealmByName("userSessions").getUserSession(userSession.getId()));
}
