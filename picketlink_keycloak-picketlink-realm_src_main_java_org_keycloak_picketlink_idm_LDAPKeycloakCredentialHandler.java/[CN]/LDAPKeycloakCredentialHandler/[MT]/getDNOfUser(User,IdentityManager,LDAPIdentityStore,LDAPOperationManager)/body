{
  LDAPMappingConfiguration ldapEntryConfig=ldapStore.getConfig().getMappingConfig(User.class);
  IdentityQuery<User> identityQuery=identityManager.createIdentityQuery(User.class).setParameter(User.LOGIN_NAME,user.getLoginName());
  StringBuilder filter=Reflections.invokeMethod(false,KeycloakLDAPIdentityStore.CREATE_SEARCH_FILTER_METHOD,StringBuilder.class,ldapStore,identityQuery,ldapEntryConfig);
  List<SearchResult> search=null;
  try {
    search=operationManager.search(ldapEntryConfig.getBaseDN(),filter.toString(),ldapEntryConfig);
  }
 catch (  NamingException ne) {
    throw new RuntimeException(ne);
  }
  if (search.size() > 0) {
    SearchResult sr1=search.get(0);
    return sr1.getNameInNamespace();
  }
 else {
    return null;
  }
}
