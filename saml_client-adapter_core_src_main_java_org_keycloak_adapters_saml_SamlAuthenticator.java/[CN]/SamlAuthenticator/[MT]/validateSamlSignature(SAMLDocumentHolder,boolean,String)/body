{
  try {
    if (postBinding) {
      verifyPostBindingSignature(holder.getSamlDocument(),deployment.getIDP().getSignatureValidationKey());
    }
 else {
      verifyRedirectBindingSignature(deployment.getIDP().getSignatureValidationKey(),paramKey);
    }
  }
 catch (  VerificationException e) {
    log.error("validation failed",e);
    throw new RuntimeException("invalid document signature");
  }
}
