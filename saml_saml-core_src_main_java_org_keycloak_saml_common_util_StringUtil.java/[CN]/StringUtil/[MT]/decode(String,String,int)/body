{
  String pbeAlgo=PicketLinkCommonConstants.PBE_ALGORITHM;
  if (maskedString.startsWith(PicketLinkCommonConstants.PASS_MASK_PREFIX)) {
    SecretKeyFactory factory=SecretKeyFactory.getInstance(pbeAlgo);
    char[] password="somearbitrarycrazystringthatdoesnotmatter".toCharArray();
    PBEParameterSpec cipherSpec=new PBEParameterSpec(salt.getBytes(),iterationCount);
    PBEKeySpec keySpec=new PBEKeySpec(password);
    SecretKey cipherKey=factory.generateSecret(keySpec);
    maskedString=maskedString.substring(PicketLinkCommonConstants.PASS_MASK_PREFIX.length());
    String decodedValue=PBEUtils.decode64(maskedString,pbeAlgo,cipherKey,cipherSpec);
    maskedString=decodedValue;
  }
  return maskedString;
}
