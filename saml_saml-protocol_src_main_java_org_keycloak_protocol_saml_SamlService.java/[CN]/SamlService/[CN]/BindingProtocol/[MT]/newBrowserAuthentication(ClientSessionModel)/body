{
  List<IdentityProviderModel> identityProviders=realm.getIdentityProviders();
  for (  IdentityProviderModel identityProvider : identityProviders) {
    if (identityProvider.isAuthenticateByDefault()) {
      return buildRedirectToIdentityProvider(identityProvider.getAlias(),new ClientSessionCode(realm,clientSession).getCode());
    }
  }
  String flowId=null;
  for (  AuthenticationFlowModel flow : realm.getAuthenticationFlows()) {
    if (flow.getAlias().equals("browser")) {
      flowId=flow.getId();
      break;
    }
  }
  AuthenticationProcessor processor=new AuthenticationProcessor();
  processor.setClientSession(clientSession).setFlowId(flowId).setConnection(clientConnection).setEventBuilder(event).setProtector(authManager.getProtector()).setRealm(realm).setSession(session).setUriInfo(uriInfo).setRequest(request);
  try {
    return processor.authenticate();
  }
 catch (  Exception e) {
    return processor.handleBrowserException(e);
  }
}
