{
  FacesContext ctx=FacesContext.getCurrentInstance();
  HttpServletRequest request=(HttpServletRequest)ctx.getExternalContext().getRequest();
  realm=(RealmModel)request.getAttribute(RealmModel.class.getName());
  if (RealmModel.DEFAULT_REALM.equals(realm.getName())) {
    name="Keycloak";
  }
 else {
    name=realm.getName();
  }
  loginAction=((URI)request.getAttribute("KEYCLOAK_LOGIN_ACTION")).toString();
  socialLoginUrl=((URI)request.getAttribute("KEYCLOAK_SOCIAL_LOGIN")).toString();
  username=(String)request.getAttribute("username");
  if (request.getAttribute("KEYCLOAK_LOGIN_ERROR_MESSAGE") != null) {
    FacesMessage message=new FacesMessage(FacesMessage.SEVERITY_ERROR,(String)request.getAttribute("KEYCLOAK_LOGIN_ERROR_MESSAGE"),null);
    ctx.addMessage(null,message);
  }
  addRequiredCredentials();
  addHiddenProperties(request,"client_id","scope","state","redirect_uri");
  addSocialProviders();
  theme="default";
  themeUrl=FacesContext.getCurrentInstance().getExternalContext().getRequestContextPath() + "/sdk/theme/" + theme;
  themeConfig=new HashMap<String,Object>();
  themeConfig.put("styles",themeUrl + "/styles.css");
  if (RealmModel.DEFAULT_REALM.equals(realm.getName())) {
    themeConfig.put("logo",themeUrl + "/img/red-hat-logo.png");
    themeConfig.put("background",themeUrl + "/img/login-screen-background.jpg");
  }
 else {
    themeConfig.put("background",themeUrl + "/img/customer-login-screen-bg2.jpg");
    themeConfig.put("displayPoweredBy",true);
  }
}
