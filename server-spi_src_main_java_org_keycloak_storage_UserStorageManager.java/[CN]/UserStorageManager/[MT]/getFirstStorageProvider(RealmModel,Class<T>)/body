{
  for (  StorageProviderModel model : getStorageProviders(realm)) {
    StorageProviderFactory factory=(StorageProviderFactory)session.getKeycloakSessionFactory().getProviderFactory(StorageProvider.class,model.getProviderName());
    if (Types.supports(type,factory,StorageProviderFactory.class)) {
      return type.cast(factory.getInstance(session,model));
    }
  }
  return null;
}
