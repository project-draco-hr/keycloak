{
  return query(new PaginatedQuery(){
    @Override public List<UserModel> query(    UserQueryProvider provider,    int first,    int max){
      if (provider instanceof UserProvider) {
        return ((UserProvider)provider).getUsers(realm,first,max,includeServiceAccounts);
      }
      return provider.getUsers(realm,first,max);
    }
  }
,realm,firstResult,maxResults);
}
