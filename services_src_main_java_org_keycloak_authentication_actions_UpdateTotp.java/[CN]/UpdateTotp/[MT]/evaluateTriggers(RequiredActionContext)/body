{
  for (  RequiredCredentialModel c : context.getRealm().getRequiredCredentials()) {
    if (c.getType().equals(CredentialRepresentation.TOTP) && !context.getUser().isTotp()) {
      context.getUser().addRequiredAction(UserModel.RequiredAction.CONFIGURE_TOTP);
      logger.debug("User is required to configure totp");
    }
  }
}
