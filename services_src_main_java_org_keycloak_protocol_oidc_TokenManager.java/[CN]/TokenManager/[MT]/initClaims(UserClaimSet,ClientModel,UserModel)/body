{
  claimSet.setSubject(user.getId());
  if (ClaimMask.hasUsername(model.getAllowedClaimsMask())) {
    claimSet.setPreferredUsername(user.getUsername());
  }
  if (ClaimMask.hasEmail(model.getAllowedClaimsMask())) {
    claimSet.setEmail(user.getEmail());
    claimSet.setEmailVerified(user.isEmailVerified());
  }
  if (ClaimMask.hasName(model.getAllowedClaimsMask())) {
    claimSet.setFamilyName(user.getLastName());
    claimSet.setGivenName(user.getFirstName());
    StringBuilder fullName=new StringBuilder();
    if (user.getFirstName() != null)     fullName.append(user.getFirstName()).append(" ");
    if (user.getLastName() != null)     fullName.append(user.getLastName());
    claimSet.setName(fullName.toString());
  }
}
