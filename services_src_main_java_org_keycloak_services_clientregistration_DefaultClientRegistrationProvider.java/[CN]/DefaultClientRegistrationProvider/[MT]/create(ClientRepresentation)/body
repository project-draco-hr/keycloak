{
  event.event(EventType.CLIENT_REGISTER);
  authenticate(true,null);
  try {
    ClientModel clientModel=RepresentationToModel.createClient(session,realm,client,true);
    client=ModelToRepresentation.toRepresentation(clientModel);
    URI uri=session.getContext().getUri().getAbsolutePathBuilder().path(clientModel.getId()).build();
    logger.infov("Created client {0}",client.getClientId());
    event.client(client.getClientId()).success();
    return Response.created(uri).entity(client).build();
  }
 catch (  ModelDuplicateException e) {
    return ErrorResponse.exists("Client " + client.getClientId() + " already exists");
  }
}
