{
  String adminRealmName=Config.getAdminRealm();
  if (session.model().getRealm(adminRealmName) != null) {
    return;
  }
  logger.info("Initializing " + adminRealmName + " realm");
  RealmManager manager=new RealmManager(session);
  manager.setContextPath(contextPath);
  RealmModel realm=manager.createRealm(adminRealmName,adminRealmName);
  realm.setName(adminRealmName);
  realm.setEnabled(true);
  realm.addRequiredCredential(CredentialRepresentation.PASSWORD);
  realm.setSsoSessionIdleTimeout(300);
  realm.setAccessTokenLifespan(60);
  realm.setSsoSessionMaxLifespan(36000);
  realm.setAccessCodeLifespan(60);
  realm.setAccessCodeLifespanUserAction(300);
  realm.setSslNotRequired(true);
  realm.setRegistrationAllowed(false);
  manager.generateRealmKeys(realm);
  realm.setAuthenticationProviders(Arrays.asList(AuthenticationProviderModel.DEFAULT_PROVIDER));
  realm.setAuditListeners(Collections.singleton("jboss-logging"));
  UserModel adminUser=realm.addUser("admin");
  adminUser.setEnabled(true);
  UserCredentialModel password=new UserCredentialModel();
  password.setType(UserCredentialModel.PASSWORD);
  password.setValue("admin");
  adminUser.updateCredential(password);
  adminUser.addRequiredAction(UserModel.RequiredAction.UPDATE_PASSWORD);
  RoleModel adminRole=realm.getRole(AdminRoles.ADMIN);
  adminUser.grantRole(adminRole);
  ApplicationModel accountApp=realm.getApplicationNameMap().get(Constants.ACCOUNT_MANAGEMENT_APP);
  for (  String r : accountApp.getDefaultRoles()) {
    adminUser.grantRole(accountApp.getRole(r));
  }
}
