{
  InstallationAdapterConfig rep=new InstallationAdapterConfig();
  rep.setRealm(realmModel.getName());
  rep.setRealmKey(realmModel.getPublicKeyPem());
  rep.setSslNotRequired(realmModel.isSslNotRequired());
  rep.setAuthServerUrl(baseUri.toString());
  rep.setUseResourceRoleMappings(applicationModel.getRoles().size() > 0);
  rep.setResource(applicationModel.getName());
  Map<String,String> creds=new HashMap<String,String>();
  String cred=realmModel.getSecret(applicationModel.getAgent()).getValue();
  creds.put(CredentialRepresentation.SECRET,cred);
  rep.setCredentials(creds);
  return rep;
}
