{
  OAuthClientModel model=create(rep.getName());
  update(rep,model);
  UserModel resourceUser=model.getAgent();
  if (rep.getCredentials() != null) {
    for (    CredentialRepresentation cred : rep.getCredentials()) {
      UserCredentialModel credential=new UserCredentialModel();
      credential.setType(cred.getType());
      credential.setValue(cred.getValue());
      realm.updateCredential(resourceUser,credential);
    }
  }
  if (rep.getClaims() != null) {
    ClaimManager.setClaims(model,rep.getClaims());
  }
 else {
    model.setAllowedClaimsMask(ClaimMask.USERNAME);
  }
  return model;
}
