{
  ApplicationModel adminConsole=realm.getApplicationByName(Constants.ADMIN_CONSOLE_APPLICATION);
  if (adminConsole == null)   adminConsole=new ApplicationManager(this).createApplication(realm,Constants.ADMIN_CONSOLE_APPLICATION);
  String baseUrl=contextPath + "/admin/" + realm.getName()+ "/console";
  adminConsole.setBaseUrl(baseUrl + "/index.html");
  adminConsole.setEnabled(true);
  adminConsole.setPublicClient(true);
  adminConsole.addRedirectUri(baseUrl + "/*");
  RoleModel adminRole;
  if (realm.getName().equals(Config.getAdminRealm())) {
    adminRole=realm.getRole(AdminRoles.ADMIN);
  }
 else {
    String realmAdminApplicationName=getRealmAdminApplicationName(realm);
    ApplicationModel realmAdminApp=realm.getApplicationByName(realmAdminApplicationName);
    adminRole=realmAdminApp.getRole(AdminRoles.REALM_ADMIN);
  }
  adminConsole.addScopeMapping(adminRole);
}
