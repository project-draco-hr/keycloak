{
  ApacheHttpClient4Executor executor=createExecutor();
  try {
    realm.setNotBefore(Time.currentTime());
    List<ApplicationModel> resources=realm.getApplications();
    logger.debugv("logging out {0} resources ",resources.size());
    GlobalRequestResult finalResult=new GlobalRequestResult();
    for (    ApplicationModel resource : resources) {
      GlobalRequestResult currentResult=logoutApplication(requestUri,realm,resource,executor,realm.getNotBefore());
      finalResult.addAll(currentResult);
    }
    return finalResult;
  }
  finally {
    executor.getHttpClient().getConnectionManager().shutdown();
  }
}
