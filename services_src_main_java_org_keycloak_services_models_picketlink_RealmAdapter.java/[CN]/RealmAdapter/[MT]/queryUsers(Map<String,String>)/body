{
  IdentityQuery<User> userQuery=getIdm().createIdentityQuery(User.class);
  for (  Map.Entry<String,String> entry : parameters.entrySet()) {
    userQuery.setParameter(AttributedType.QUERY_ATTRIBUTE.byName(entry.getKey()),entry.getValue());
  }
  List<User> users=userQuery.getResultList();
  List<UserModel> userModels=new ArrayList<UserModel>();
  for (  User user : users) {
    userModels.add(new UserAdapter(user,getIdm()));
  }
  return userModels;
}
