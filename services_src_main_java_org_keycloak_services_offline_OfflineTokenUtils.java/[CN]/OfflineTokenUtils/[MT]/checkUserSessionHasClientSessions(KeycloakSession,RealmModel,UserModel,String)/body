{
  Collection<OfflineClientSessionModel> clientSessions=kcSession.users().getOfflineClientSessions(realm,user);
  for (  OfflineClientSessionModel clientSession : clientSessions) {
    if (clientSession.getUserSessionId().equals(userSessionId)) {
      return;
    }
  }
  if (logger.isTraceEnabled()) {
    logger.tracef("Removing offline userSession for user %s as it doesn't have any client sessions attached. UserSessionID: %s",user.getUsername(),userSessionId);
  }
  kcSession.users().removeOfflineUserSession(realm,user,userSessionId);
}
