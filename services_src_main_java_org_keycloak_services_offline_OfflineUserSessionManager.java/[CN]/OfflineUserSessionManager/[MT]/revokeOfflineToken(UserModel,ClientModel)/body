{
  Collection<OfflineClientSessionModel> clientSessions=user.getOfflineClientSessions();
  boolean anyRemoved=false;
  for (  OfflineClientSessionModel clientSession : clientSessions) {
    if (clientSession.getClientId().equals(client.getId())) {
      if (logger.isTraceEnabled()) {
        logger.tracef("Removing existing offline token for user '%s' and client '%s' . ClientSessionID was '%s' .",user.getUsername(),client.getClientId(),clientSession.getClientSessionId());
      }
      user.removeOfflineClientSession(clientSession.getClientSessionId());
      checkUserSessionHasClientSessions(user,clientSession.getUserSessionId());
      anyRemoved=true;
    }
  }
  return anyRemoved;
}
