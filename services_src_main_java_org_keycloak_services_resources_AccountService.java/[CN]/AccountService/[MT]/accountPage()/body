{
  List<MediaType> types=headers.getAcceptableMediaTypes();
  if (types.contains(MediaType.WILDCARD_TYPE) || (types.contains(MediaType.TEXT_HTML_TYPE))) {
    return forwardToPage(null,AccountPages.ACCOUNT);
  }
 else   if (types.contains(MediaType.APPLICATION_JSON_TYPE)) {
    requireOneOf(AccountRoles.MANAGE_ACCOUNT,AccountRoles.VIEW_PROFILE);
    return Cors.add(request,Response.ok(ModelToRepresentation.toRepresentation(auth.getUser()))).auth().allowedOrigins(auth.getToken()).build();
  }
 else {
    return Response.notAcceptable(Variant.VariantListBuilder.newInstance().mediaTypes(MediaType.TEXT_HTML_TYPE,MediaType.APPLICATION_JSON_TYPE).build()).build();
  }
}
