{
  IdentityProviderModel identityProviderModel=realm.getIdentityProviderById(providerId);
  if (identityProviderModel != null) {
    IdentityProviderFactory providerFactory=getIdentityProviderFactory(identityProviderModel);
    if (providerFactory == null) {
      throw new RuntimeException("Could not find provider factory for identity provider [" + providerId + "].");
    }
    return providerFactory.create(identityProviderModel);
  }
  return null;
}
