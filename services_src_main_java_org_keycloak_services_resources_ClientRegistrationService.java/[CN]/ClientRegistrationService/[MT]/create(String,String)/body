{
  event.event(EventType.CLIENT_REGISTER);
  authenticate(true,null);
  if (format == null) {
    format=KeycloakClientDescriptionConverter.ID;
  }
  ClientDescriptionConverter converter=session.getProvider(ClientDescriptionConverter.class,format);
  if (converter == null) {
    throw new BadRequestException("Invalid format");
  }
  ClientRepresentation rep=converter.convertToInternal(description);
  try {
    ClientModel clientModel=RepresentationToModel.createClient(session,realm,rep,true);
    rep=ModelToRepresentation.toRepresentation(clientModel);
    URI uri=session.getContext().getUri().getAbsolutePathBuilder().path(clientModel.getId()).build();
    logger.infov("Created client {0}",rep.getClientId());
    event.client(rep.getClientId()).success();
    return Response.created(uri).entity(rep).build();
  }
 catch (  ModelDuplicateException e) {
    return ErrorResponse.exists("Client " + rep.getClientId() + " already exists");
  }
}
