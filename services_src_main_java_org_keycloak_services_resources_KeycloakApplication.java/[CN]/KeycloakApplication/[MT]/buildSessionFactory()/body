{
  if (PropertiesManager.isMongoSessionFactory()) {
    return buildMongoDBSessionFactory();
  }
 else   if (PropertiesManager.isPicketlinkSessionFactory()) {
    return buildPicketlinkSessionFactory();
  }
 else   if (PropertiesManager.isJpaSessionFactory()) {
    return buildJpaSessionFactory();
  }
 else {
    throw new IllegalStateException("Unknown session factory type: " + PropertiesManager.getSessionFactoryType());
  }
}
