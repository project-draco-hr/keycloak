{
  ProviderSession providerSession=providerSessionFactory.createSession();
  KeycloakSession session=providerSession.getProvider(KeycloakSession.class);
  try {
    session.getTransaction().begin();
    RealmManager manager=new RealmManager(session);
    manager.setContextPath(getContextPath());
    if (rep.getId() != null && manager.getRealm(rep.getId()) != null) {
      log.info("Not importing realm " + rep.getRealm() + " from "+ from+ ".  It already exists.");
      return;
    }
    if (manager.getRealmByName(rep.getRealm()) != null) {
      log.info("Not importing realm " + rep.getRealm() + " from "+ from+ ".  It already exists.");
      return;
    }
    RealmModel realm=manager.createRealm(rep.getId(),rep.getRealm());
    manager.importRealm(rep,realm);
    log.info("Imported realm " + realm.getName() + " from "+ from);
    session.getTransaction().commit();
  }
  finally {
    providerSession.close();
  }
}
