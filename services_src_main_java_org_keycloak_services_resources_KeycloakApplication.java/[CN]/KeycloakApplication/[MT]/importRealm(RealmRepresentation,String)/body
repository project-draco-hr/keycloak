{
  KeycloakSession session=sessionFactory.create();
  try {
    session.getTransaction().begin();
    RealmManager manager=new RealmManager(session);
    manager.setContextPath(getContextPath());
    if (rep.getId() != null && manager.getRealm(rep.getId()) != null) {
      log.realmExists(rep.getRealm(),from);
      return;
    }
    if (manager.getRealmByName(rep.getRealm()) != null) {
      log.realmExists(rep.getRealm(),from);
      return;
    }
    try {
      RealmModel realm=manager.importRealm(rep);
      session.getTransaction().commit();
      log.importedRealm(realm.getName(),from);
    }
 catch (    Throwable t) {
      session.getTransaction().rollback();
      log.unableToImportRealm(t,rep.getRealm(),from);
    }
  }
  finally {
    session.close();
  }
}
