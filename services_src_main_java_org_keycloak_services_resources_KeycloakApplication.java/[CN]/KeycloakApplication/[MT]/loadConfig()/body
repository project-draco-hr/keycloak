{
  try {
    JsonNode node=null;
    String configDir=System.getProperty("jboss.server.config.dir");
    if (configDir != null) {
      File f=new File(configDir + File.separator + "keycloak-server.json");
      if (f.isFile()) {
        log.info("Load config from " + f.getAbsolutePath());
        node=new ObjectMapper().readTree(f);
      }
    }
    if (node == null) {
      URL resource=Thread.currentThread().getContextClassLoader().getResource("META-INF/keycloak-server.json");
      if (resource != null) {
        log.info("Load config from " + resource);
        node=new ObjectMapper().readTree(resource);
      }
    }
    if (node != null) {
      Properties properties=new SystemEnvProperties();
      Config.init(new JsonConfigProvider(node,properties));
      return;
    }
 else {
      throw new RuntimeException("Config 'keycloak-server.json' not found");
    }
  }
 catch (  IOException e) {
    throw new RuntimeException("Failed to load config",e);
  }
}
