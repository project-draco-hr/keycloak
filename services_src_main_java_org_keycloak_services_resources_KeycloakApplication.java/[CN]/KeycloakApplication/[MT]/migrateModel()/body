{
  KeycloakSession session=sessionFactory.create();
  try {
    session.getTransactionManager().begin();
    MigrationModelManager.migrate(session);
    session.getTransactionManager().commit();
  }
 catch (  Exception e) {
    session.getTransactionManager().rollback();
    logger.migrationFailure(e);
    throw e;
  }
 finally {
    session.close();
  }
}
