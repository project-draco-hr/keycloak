{
  RealmManager realmManager=new RealmManager(session);
  RealmModel realm=realmManager.getRealm(id);
  if (realm == null) {
    logger.debug("realm not found");
    throw new NotFoundException();
  }
  ApplicationModel application=realm.getApplicationNameMap().get(Constants.ACCOUNT_APPLICATION);
  if (application == null || !application.isEnabled()) {
    logger.debug("account management not enabled");
    throw new NotFoundException();
  }
  AccountService accountService=new AccountService(realm,application,tokenManager);
  resourceContext.initResource(accountService);
  return accountService;
}
