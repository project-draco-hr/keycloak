{
  return new Transaction(false){
    @Override protected SocialService callImpl(){
      RealmManager realmManager=new RealmManager(session);
      RealmModel realm=realmManager.getRealm(id);
      if (realm == null) {
        logger.debug("realm not found");
        throw new NotFoundException();
      }
      SocialService socialService=new SocialService(realm,tokenManager,socialRequestManager);
      resourceContext.initResource(socialService);
      return socialService;
    }
  }
.call();
}
