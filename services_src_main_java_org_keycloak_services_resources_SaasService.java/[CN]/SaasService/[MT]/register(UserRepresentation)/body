{
  return new Transaction(){
    @Override protected Response callImpl(){
      RealmManager realmManager=new RealmManager(session);
      RealmModel defaultRealm=realmManager.defaultRealm();
      UserModel user=registerMe(defaultRealm,newUser);
      if (user == null) {
        return Response.status(400).type("text/plain").entity("Already exists").build();
      }
      URI uri=uriInfo.getBaseUriBuilder().path(RealmsResource.class).path(user.getLoginName()).build();
      return Response.created(uri).build();
    }
  }
.call();
}
