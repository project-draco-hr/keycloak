{
  this.session=ResteasyProviderFactory.getContextData(KeycloakSession.class);
  if (session == null) {
    KeycloakApplication app=(KeycloakApplication)ResteasyProviderFactory.getContextData(Application.class);
    session=app.getFactory().createSession();
    created=true;
    ResteasyProviderFactory.pushContext(KeycloakSession.class,session);
  }
  transaction=session.getTransaction();
  closeSession=close;
}
