{
  if (path.equals("js/keycloak.js")) {
    return getKeycloakJs();
  }
  try {
    ThemeProvider themeProvider=session.getProvider(ThemeProvider.class,"extending");
    Theme theme=themeProvider.getTheme(realm.getAdminTheme(),Theme.Type.ADMIN);
    InputStream resource=theme.getResourceAsStream(path);
    if (resource != null) {
      String contentType=mimeTypes.getContentType(path);
      CacheControl cacheControl=new CacheControl();
      cacheControl.setNoTransform(false);
      cacheControl.setMaxAge(Config.scope("theme").getInt("staticMaxAge",-1));
      Response.ResponseBuilder builder=Response.ok(resource).type(contentType).cacheControl(cacheControl);
      BrowserSecurityHeaderSetup.headers(builder,realm);
      return builder.build();
    }
 else {
      return Response.status(Response.Status.NOT_FOUND).build();
    }
  }
 catch (  Exception e) {
    logger.warn("Failed to get theme resource",e);
    return Response.serverError().build();
  }
}
