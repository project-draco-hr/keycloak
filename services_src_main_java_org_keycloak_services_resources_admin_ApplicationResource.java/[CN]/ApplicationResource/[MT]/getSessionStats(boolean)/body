{
  logger.info("session-stats");
  auth.requireView();
  if (application.getManagementUrl() == null || application.getManagementUrl().trim().equals("")) {
    logger.info("sending empty stats");
    SessionStats stats=new SessionStats();
    if (users)     stats.setUsers(new HashMap<String,UserStats>());
    return stats;
  }
  SessionStats stats=new ResourceAdminManager().getSessionStats(uriInfo.getRequestUri(),realm,application,users);
  if (stats == null) {
    logger.info("app returned null stats");
  }
 else {
    logger.info("activeUsers: " + stats.getActiveUsers());
    logger.info("activeSessions: " + stats.getActiveSessions());
  }
  return stats;
}
