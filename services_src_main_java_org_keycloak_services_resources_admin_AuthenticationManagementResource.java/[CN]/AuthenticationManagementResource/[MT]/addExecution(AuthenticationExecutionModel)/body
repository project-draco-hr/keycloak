{
  this.auth.requireManage();
  AuthenticationFlowModel parentFlow=getParentFlow(model);
  if (parentFlow.isBuiltIn()) {
    throw new BadRequestException("It is illegal to add execution to a built in flow");
  }
  int priority=0;
  List<AuthenticationExecutionModel> executions=getSortedExecutions(parentFlow);
  for (  AuthenticationExecutionModel execution : executions) {
    priority=execution.getPriority();
  }
  if (priority > 0)   priority+=10;
  model.setPriority(priority);
  model=realm.addAuthenticatorExecution(model);
  return Response.created(uriInfo.getAbsolutePathBuilder().path(model.getId()).build()).build();
}
