{
  auth.requireManage();
  if (config.getHostName() == null) {
    return ErrorResponse.error("hostName not provided in config",Response.Status.BAD_REQUEST);
  }
  int count=config.getCount() != null ? config.getCount() : 1;
  try {
    ClientRegistrationTrustedHostModel clientRegTrustedHostModel=session.sessions().createClientRegistrationTrustedHostModel(realm,config.getHostName(),count);
    adminEvent.operation(OperationType.CREATE).resourcePath(uriInfo,clientRegTrustedHostModel.getHostName()).representation(config).success();
    return Response.created(uriInfo.getAbsolutePathBuilder().path(clientRegTrustedHostModel.getHostName()).build()).build();
  }
 catch (  ModelDuplicateException mde) {
    return ErrorResponse.exists(mde.getMessage());
  }
}
