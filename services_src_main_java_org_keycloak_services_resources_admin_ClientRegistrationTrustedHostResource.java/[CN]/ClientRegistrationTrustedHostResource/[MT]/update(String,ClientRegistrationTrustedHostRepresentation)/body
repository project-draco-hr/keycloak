{
  auth.requireManage();
  if (config.getHostName() == null || !hostName.equals(config.getHostName())) {
    return ErrorResponse.error("hostName not provided in config or not compatible",Response.Status.BAD_REQUEST);
  }
  if (config.getCount() == null) {
    return ErrorResponse.error("count needs to be available",Response.Status.BAD_REQUEST);
  }
  if (config.getRemainingCount() != null && config.getRemainingCount() > config.getCount()) {
    return ErrorResponse.error("remainingCount can't be bigger than count",Response.Status.BAD_REQUEST);
  }
  ClientRegistrationTrustedHostModel hostModel=session.sessions().getClientRegistrationTrustedHostModel(realm,config.getHostName());
  if (hostModel == null) {
    return ErrorResponse.error("hostName record not found",Response.Status.NOT_FOUND);
  }
  hostModel.setCount(config.getCount());
  hostModel.setRemainingCount(config.getRemainingCount());
  adminEvent.operation(OperationType.UPDATE).resourcePath(uriInfo).representation(config).success();
  return Response.noContent().build();
}
