{
  this.auth.requireManage();
  String providerId=data.get("providerId").toString();
  String from=data.get("fromUrl").toString();
  InputStream inputStream=session.getProvider(HttpClientProvider.class).get(from);
  try {
    IdentityProviderFactory providerFactory=getProviderFactorytById(providerId);
    Map<String,String> config;
    config=providerFactory.parseConfig(inputStream);
    adminEvent.operation(OperationType.CREATE).resourcePath(providerFactory,uriInfo.getPath()).representation(config).success();
    return config;
  }
  finally {
    try {
      inputStream.close();
    }
 catch (    IOException e) {
    }
  }
}
