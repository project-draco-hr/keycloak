{
  auth.requireManage();
  logger.debug("updating realm: " + realm.getName());
  try {
    RepresentationToModel.updateRealm(rep,realm);
    List<UserFederationProviderModel> federationProviders=realm.getUserFederationProviders();
    UsersSyncManager usersSyncManager=new UsersSyncManager();
    for (    final UserFederationProviderModel fedProvider : federationProviders) {
      usersSyncManager.notifyToRefreshPeriodicSync(session,realm,fedProvider,false);
    }
    adminEvent.operation(OperationType.UPDATE).representation(rep).success();
    return Response.noContent().build();
  }
 catch (  PatternSyntaxException e) {
    return ErrorResponse.error("Specified regex pattern(s) is invalid.",Response.Status.BAD_REQUEST);
  }
catch (  ModelDuplicateException e) {
    throw e;
  }
catch (  Exception e) {
    logger.error(e.getMessage(),e);
    return ErrorResponse.error("Failed to update " + rep.getRealm() + " Realm.",Response.Status.INTERNAL_SERVER_ERROR);
  }
}
