{
  RealmManager realmManager=new RealmManager(session);
  RealmModel realm=realmManager.getRealmByName(name);
  if (realm == null)   throw new NotFoundException("{realm} = " + name);
  if (!auth.getRealm().equals(realmManager.getKeycloakAdminstrationRealm()) && !auth.getRealm().equals(realm)) {
    throw new ForbiddenException();
  }
  RealmAuth realmAuth;
  if (auth.getRealm().equals(realmManager.getKeycloakAdminstrationRealm())) {
    realmAuth=new RealmAuth(auth,realm.getMasterAdminApp());
  }
 else {
    realmAuth=new RealmAuth(auth,realm.getApplicationByName(realmManager.getRealmAdminApplicationName(auth.getRealm())));
  }
  event.detail(Details.REALM,realm.getName());
  RealmAdminResource adminResource=new RealmAdminResource(realmAuth,realm,tokenManager,event);
  ResteasyProviderFactory.getInstance().injectProperties(adminResource);
  return adminResource;
}
