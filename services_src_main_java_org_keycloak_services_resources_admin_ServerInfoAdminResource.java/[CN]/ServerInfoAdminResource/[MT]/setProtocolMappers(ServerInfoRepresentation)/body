{
  info.protocolMapperTypes=new HashMap<String,List<ProtocolMapperTypeRepresentation>>();
  for (  ProviderFactory p : session.getKeycloakSessionFactory().getProviderFactories(ProtocolMapper.class)) {
    ProtocolMapper mapper=(ProtocolMapper)p;
    List<ProtocolMapperTypeRepresentation> types=info.protocolMapperTypes.get(mapper.getProtocol());
    if (types == null) {
      types=new LinkedList<ProtocolMapperTypeRepresentation>();
      info.protocolMapperTypes.put(mapper.getProtocol(),types);
    }
    ProtocolMapperTypeRepresentation rep=new ProtocolMapperTypeRepresentation();
    rep.setId(mapper.getId());
    rep.setName(mapper.getDisplayType());
    rep.setHelpText(mapper.getHelpText());
    rep.setCategory(mapper.getDisplayCategory());
    rep.setProperties(new LinkedList<ProtocolMapperTypeRepresentation.ConfigProperty>());
    for (    ProtocolMapper.ConfigProperty prop : mapper.getConfigProperties()) {
      ProtocolMapperTypeRepresentation.ConfigProperty propRep=new ProtocolMapperTypeRepresentation.ConfigProperty();
      propRep.setName(prop.getName());
      propRep.setLabel(prop.getLabel());
      propRep.setHelpText(prop.getHelpText());
      rep.getProperties().add(propRep);
    }
    types.add(rep);
  }
}
