{
  UserModel user=realm.getUser(username);
  if (user == null) {
    throw new NotFoundException();
  }
  ApplicationModel application=realm.getApplicationById(appId);
  if (application == null) {
    throw new NotFoundException();
  }
  if (roles == null) {
    List<RoleModel> roleModels=application.getRoleMappings(user);
    for (    RoleModel roleModel : roleModels) {
      application.deleteRoleMapping(user,roleModel);
    }
  }
 else {
    for (    RoleRepresentation role : roles) {
      RoleModel roleModel=application.getRoleById(role.getId());
      if (roleModel == null) {
        throw new NotFoundException();
      }
      application.deleteRoleMapping(user,roleModel);
    }
  }
}
