{
  logger.info("session-stats");
  auth.requireView();
  UserModel user=session.users().getUserByUsername(username,realm);
  if (user == null) {
    throw new NotFoundException("User not found");
  }
  Map<String,UserStats> stats=new HashMap<String,UserStats>();
  for (  ApplicationModel applicationModel : realm.getApplications()) {
    if (applicationModel.getManagementUrl() == null)     continue;
    UserStats appStats=new ResourceAdminManager().getUserStats(uriInfo.getRequestUri(),realm,applicationModel,user);
    if (appStats == null)     continue;
    if (appStats.isLoggedIn())     stats.put(applicationModel.getName(),appStats);
  }
  return stats;
}
