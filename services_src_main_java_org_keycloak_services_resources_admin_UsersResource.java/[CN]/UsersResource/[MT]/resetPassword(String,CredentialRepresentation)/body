{
  auth.requireManage();
  UserModel user=session.users().getUserByUsername(username,realm);
  if (user == null) {
    throw new NotFoundException("User not found");
  }
  if (pass == null || pass.getValue() == null || !CredentialRepresentation.PASSWORD.equals(pass.getType())) {
    throw new BadRequestException("No password provided");
  }
  UserCredentialModel cred=RepresentationToModel.convertCredential(pass);
  session.users().updateCredential(realm,user,cred);
  user.addRequiredAction(UserModel.RequiredAction.UPDATE_PASSWORD);
}
