{
  for (  RequiredCredentialModel c : realm.getRequiredCredentials()) {
    if (c.getType().equals(CredentialRepresentation.TOTP) && !user.isTotp()) {
      user.addRequiredAction(RequiredAction.CONFIGURE_TOTP);
      log.debug("User is required to configure totp");
    }
  }
}
