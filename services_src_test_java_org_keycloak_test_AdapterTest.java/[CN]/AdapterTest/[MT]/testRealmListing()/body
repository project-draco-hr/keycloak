{
  realmModel=getRealmManager().createRealm("JUGGLER");
  realmModel.setAccessCodeLifespan(100);
  realmModel.setAccessCodeLifespanUserAction(600);
  realmModel.setCookieLoginAllowed(true);
  realmModel.setEnabled(true);
  realmModel.setName("JUGGLER");
  realmModel.setPrivateKeyPem("0234234");
  realmModel.setPublicKeyPem("0234234");
  realmModel.setTokenLifespan(1000);
  realmModel.setAutomaticRegistrationAfterSocialLogin(true);
  realmModel.addDefaultRole("foo");
  System.out.println(realmModel.getId());
  realmModel=getRealmManager().getRealm(realmModel.getId());
  Assert.assertNotNull(realmModel);
  Assert.assertEquals(realmModel.getAccessCodeLifespan(),100);
  Assert.assertEquals(600,realmModel.getAccessCodeLifespanUserAction());
  Assert.assertEquals(realmModel.getTokenLifespan(),1000);
  Assert.assertEquals(realmModel.isEnabled(),true);
  Assert.assertEquals(realmModel.getName(),"JUGGLER");
  Assert.assertEquals(realmModel.getPrivateKeyPem(),"0234234");
  Assert.assertEquals(realmModel.getPublicKeyPem(),"0234234");
  Assert.assertEquals(realmModel.isAutomaticRegistrationAfterSocialLogin(),true);
  Assert.assertEquals(1,realmModel.getDefaultRoles().size());
  Assert.assertEquals("foo",realmModel.getDefaultRoles().get(0).getName());
  String id=realmModel.getId();
  System.out.println("id: " + id);
  identitySession.getTransaction().commit();
  identitySession.close();
  identitySession=factory.createSession();
  identitySession.getTransaction().begin();
  realmManager=new RealmManager(identitySession);
  List<RealmModel> realms=identitySession.getRealms(null);
  System.out.println("num realms: " + realms.size());
  Assert.assertEquals(realms.size(),1);
}
