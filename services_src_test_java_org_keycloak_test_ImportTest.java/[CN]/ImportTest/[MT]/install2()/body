{
  RealmModel defaultRealm=manager.createRealm(RealmModel.DEFAULT_REALM,RealmModel.DEFAULT_REALM);
  defaultRealm.setName(RealmModel.DEFAULT_REALM);
  defaultRealm.setEnabled(true);
  defaultRealm.setTokenLifespan(300);
  defaultRealm.setAccessCodeLifespan(60);
  defaultRealm.setSslNotRequired(false);
  defaultRealm.setCookieLoginAllowed(true);
  defaultRealm.setRegistrationAllowed(true);
  manager.generateRealmKeys(defaultRealm);
  defaultRealm.addRequiredCredential(CredentialRepresentation.PASSWORD);
  RoleModel role=defaultRealm.addRole(SaasService.REALM_CREATOR_ROLE);
  UserModel admin=defaultRealm.addUser("admin");
  defaultRealm.grantRole(admin,role);
  RealmRepresentation rep=AbstractKeycloakServerTest.loadJson("testrealm-demo.json");
  RealmModel realm=manager.createRealm("demo",rep.getRealm());
  manager.importRealm(rep,realm);
  realm.addRealmAdmin(admin);
  verifyRequiredCredentials(realm.getRequiredCredentials(),"password");
  verifyRequiredCredentials(realm.getRequiredApplicationCredentials(),"totp");
  verifyRequiredCredentials(realm.getRequiredOAuthClientCredentials(),"cert");
}
