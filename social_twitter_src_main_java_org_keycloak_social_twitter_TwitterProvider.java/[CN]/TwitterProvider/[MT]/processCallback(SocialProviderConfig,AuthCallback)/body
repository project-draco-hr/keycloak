{
  try {
    Twitter twitter=new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(config.getKey(),config.getSecret());
    String verifier=callback.getQueryParam("oauth_verifier");
    RequestToken requestToken=new RequestToken(callback.getAttribute("token"),callback.getAttribute("tokenSecret"));
    twitter.getOAuthAccessToken(requestToken,verifier);
    twitter4j.User twitterUser=twitter.verifyCredentials();
    SocialUser user=new SocialUser(Long.toString(twitterUser.getId()));
    user.setFirstName(twitterUser.getName());
    return user;
  }
 catch (  Exception e) {
    throw new SocialProviderException(e);
  }
}
