{
  HttpServletRequest req=(HttpServletRequest)servletRequest;
  if ("/clear-event-queue".equals(req.getRequestURI().substring(req.getContextPath().length()))) {
    EventsListenerProvider.getInstance().clear();
    return;
  }
  if ("/event-queue".equals(req.getRequestURI().substring(req.getContextPath().length()))) {
    BlockingQueue<Event> events=EventsListenerProvider.getInstance();
    HttpServletResponse resp=(HttpServletResponse)servletResponse;
    resp.setContentType("application/json");
    Event event=events.poll();
    if (event != null) {
      JsonSerialization.writeValueToStream(servletResponse.getOutputStream(),event);
    }
 else {
      resp.setStatus(204);
    }
  }
 else {
    filterChain.doFilter(servletRequest,servletResponse);
  }
}
