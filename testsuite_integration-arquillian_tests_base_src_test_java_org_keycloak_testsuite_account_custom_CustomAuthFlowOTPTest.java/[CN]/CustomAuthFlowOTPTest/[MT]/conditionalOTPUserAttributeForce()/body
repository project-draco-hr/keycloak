{
  Map<String,String> config=new HashMap<>();
  config.put(OTP_CONTROL_USER_ATTRIBUTE,"userSkipAttribute");
  config.put(DEFAULT_OTP_OUTCOME,SKIP);
  setConditionalOTPForm(config);
  Map<String,Object> userAttributes=new HashMap<>();
  List<String> attributeValues=new ArrayList<>();
  attributeValues.add("force");
  userAttributes.put("userSkipAttribute",attributeValues);
  testUser.setAttributes(userAttributes);
  testRealmResource().users().get(testUser.getId()).update(testUser);
  testRealmAccountManagementPage.navigateTo();
  testRealmLoginPage.form().login(testUser);
  testRealmLoginPage.form().totpForm().waitForTotpInputFieldPresent();
  assertCurrentUrlStartsWith(testLoginOneTimeCodePage);
}
