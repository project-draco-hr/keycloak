{
  testRealmPage.setAuthRealm(EXAMPLE);
  testRealmLoginPage.setAuthRealm(EXAMPLE);
  configPage.setConsoleRealm(EXAMPLE);
  loginEventsPage.setConsoleRealm(EXAMPLE);
  applicationsPage.setAuthRealm(EXAMPLE);
  jsConsoleTestAppPage.navigateTo();
  driver.manage().deleteAllCookies();
  ClientResource clientResource=ApiUtil.findClientResourceByClientId(testRealmResource(),"js-console");
  ClientRepresentation client=clientResource.toRepresentation();
  client.setConsentRequired(true);
  clientResource.update(client);
  RealmRepresentation realm=testRealmResource().toRepresentation();
  realm.setEventsEnabled(true);
  realm.setEnabledEventTypes(Arrays.asList("REVOKE_GRANT","LOGIN"));
  testRealmResource().update(realm);
  jsConsoleTestAppPage.navigateTo();
  jsConsoleTestAppPage.init();
  jsConsoleTestAppPage.logIn();
  testRealmLoginPage.form().login("user","password");
  assertTrue(oAuthGrantPage.isCurrent());
  oAuthGrantPage.accept();
  jsConsoleTestAppPage.init();
  waitUntilElement(jsConsoleTestAppPage.getOutputElement()).text().contains("Init Success (Authenticated)");
  applicationsPage.navigateTo();
  applicationsPage.revokeGrantForApplication("js-console");
  jsConsoleTestAppPage.navigateTo();
  jsConsoleTestAppPage.setOnLoad("login-required");
  jsConsoleTestAppPage.init();
  waitUntilElement(By.tagName("body")).is().visible();
  assertTrue(oAuthGrantPage.isCurrent());
  loginEventsPage.navigateTo();
  loginPage.form().login(adminUser);
  loginEventsPage.table().filter();
  loginEventsPage.table().filterForm().addEventType("REVOKE_GRANT");
  loginEventsPage.table().update();
  List<WebElement> resultList=loginEventsPage.table().rows();
  assertEquals(1,resultList.size());
  resultList.get(0).findElement(By.xpath(".//td[text()='REVOKE_GRANT']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='Client']/../td[text()='account']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='IP Address']/../td[text()='127.0.0.1' or text()='0:0:0:0:0:0:0:1']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='revoked_client']/../td[text()='js-console']"));
  loginEventsPage.table().reset();
  loginEventsPage.table().filterForm().addEventType("LOGIN");
  loginEventsPage.table().update();
  resultList=loginEventsPage.table().rows();
  assertEquals(1,resultList.size());
  resultList.get(0).findElement(By.xpath(".//td[text()='LOGIN']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='Client']/../td[text()='js-console']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='IP Address']/../td[text()='127.0.0.1' or text()='0:0:0:0:0:0:0:1']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='username']/../td[text()='user']"));
  resultList.get(0).findElement(By.xpath(".//td[text()='consent']/../td[text()='consent_granted']"));
}
