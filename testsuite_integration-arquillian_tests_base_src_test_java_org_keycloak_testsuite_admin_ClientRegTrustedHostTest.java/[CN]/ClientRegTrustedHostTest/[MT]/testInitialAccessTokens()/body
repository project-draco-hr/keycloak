{
  ClientRegistrationTrustedHostRepresentation rep=new ClientRegistrationTrustedHostRepresentation();
  rep.setHostName("localhost1");
  rep.setCount(5);
  Response res=resource.create(rep);
  assertAdminEvents.assertEvent(realmId,OperationType.CREATE,AdminEventPaths.clientRegistrationTrustedHostPath("localhost1"),rep,ResourceType.CLIENT_REGISTRATION_TRUSTED_HOST_MODEL);
  res.close();
  res=resource.create(rep);
  Assert.assertEquals(409,res.getStatus());
  assertAdminEvents.assertEmpty();
  res.close();
  rep=new ClientRegistrationTrustedHostRepresentation();
  rep.setHostName("localhost2");
  rep.setCount(10);
  res=resource.create(rep);
  assertAdminEvents.assertEvent(realmId,OperationType.CREATE,AdminEventPaths.clientRegistrationTrustedHostPath("localhost2"),rep,ResourceType.CLIENT_REGISTRATION_TRUSTED_HOST_MODEL);
  res.close();
  rep=resource.get("localhost1");
  assertRep(rep,"localhost1",5,5);
  rep.setCount(7);
  rep.setRemainingCount(7);
  resource.update("localhost1",rep);
  assertAdminEvents.assertEvent(realmId,OperationType.UPDATE,AdminEventPaths.clientRegistrationTrustedHostPath("localhost1"),rep,ResourceType.CLIENT_REGISTRATION_TRUSTED_HOST_MODEL);
  List<ClientRegistrationTrustedHostRepresentation> alls=resource.list();
  Assert.assertEquals(2,alls.size());
  assertRep(findByHost(alls,"localhost1"),"localhost1",7,7);
  assertRep(findByHost(alls,"localhost2"),"localhost2",10,10);
  resource.delete("localhost1");
  assertAdminEvents.assertEvent(realmId,OperationType.DELETE,AdminEventPaths.clientRegistrationTrustedHostPath("localhost1"),ResourceType.CLIENT_REGISTRATION_TRUSTED_HOST_MODEL);
  alls=resource.list();
  Assert.assertEquals(1,alls.size());
  assertRep(alls.get(0),"localhost2",10,10);
}
