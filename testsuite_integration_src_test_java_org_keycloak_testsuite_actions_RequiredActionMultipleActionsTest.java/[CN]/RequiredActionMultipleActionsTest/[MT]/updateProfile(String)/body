{
  updateProfilePage.update("New first","New last","new@email.com",null);
  AssertEvents.ExpectedEvent expectedEvent=events.expectRequiredAction(EventType.UPDATE_PROFILE);
  if (sessionId != null) {
    expectedEvent.session(sessionId);
  }
  sessionId=expectedEvent.assertEvent().getSessionId();
  events.expectRequiredAction(EventType.UPDATE_EMAIL).session(sessionId).detail(Details.PREVIOUS_EMAIL,"test-user@localhost").detail(Details.UPDATED_EMAIL,"new@email.com").assertEvent();
  return sessionId;
}
