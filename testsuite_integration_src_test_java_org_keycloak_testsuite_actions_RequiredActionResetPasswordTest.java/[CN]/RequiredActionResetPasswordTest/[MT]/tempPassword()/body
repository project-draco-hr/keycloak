{
  loginPage.open();
  loginPage.login("test-user@localhost","password");
  changePasswordPage.assertCurrent();
  changePasswordPage.changePassword("new-password","new-password");
  events.expectRequiredAction("update_password").assertEvent();
  Assert.assertEquals(RequestType.AUTH_RESPONSE,appPage.getRequestType());
  events.expectLogin().assertEvent();
  oauth.openLogout();
  events.expectLogout().assertEvent();
  loginPage.open();
  loginPage.login("test-user@localhost","new-password");
  events.expectLogin().assertEvent();
}
