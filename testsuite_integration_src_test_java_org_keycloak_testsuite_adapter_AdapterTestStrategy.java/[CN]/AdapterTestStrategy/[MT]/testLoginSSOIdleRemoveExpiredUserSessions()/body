{
  driver.navigate().to(APP_SERVER_BASE_URL + "/customer-portal");
  System.out.println("Current url: " + driver.getCurrentUrl());
  Assert.assertTrue(driver.getCurrentUrl().startsWith(LOGIN_URL));
  loginPage.login("bburke@redhat.com","password");
  System.out.println("Current url: " + driver.getCurrentUrl());
  Assert.assertEquals(driver.getCurrentUrl(),APP_SERVER_BASE_URL + "/customer-portal" + slash);
  String pageSource=driver.getPageSource();
  System.out.println(pageSource);
  Assert.assertTrue(pageSource.contains("Bill Burke") && pageSource.contains("Stian Thorgersen"));
  KeycloakSession session=keycloakRule.startSession();
  RealmModel realm=session.realms().getRealmByName("demo");
  int originalIdle=realm.getSsoSessionIdleTimeout();
  realm.setSsoSessionIdleTimeout(1);
  session.getTransaction().commit();
  session.close();
  Time.setOffset(2);
  session=keycloakRule.startSession();
  realm=session.realms().getRealmByName("demo");
  session.sessions().removeExpiredUserSessions(realm);
  session.getTransaction().commit();
  session.close();
  driver.navigate().to(APP_SERVER_BASE_URL + "/product-portal");
  Assert.assertTrue(driver.getCurrentUrl().startsWith(LOGIN_URL));
  session=keycloakRule.startSession();
  realm=session.realms().getRealmByName("demo");
  UserModel user=session.users().getUserByUsername("bburke@redhat.com",realm);
  new ResourceAdminManager().logoutUser(null,realm,user,session);
  realm.setSsoSessionIdleTimeout(originalIdle);
  session.getTransaction().commit();
  session.close();
  Time.setOffset(0);
}
