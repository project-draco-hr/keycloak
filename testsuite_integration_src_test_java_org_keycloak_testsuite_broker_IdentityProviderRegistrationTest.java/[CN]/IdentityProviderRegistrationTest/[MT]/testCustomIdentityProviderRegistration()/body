{
  String providerId="custom-identity-provider";
  assertTrue(getInstalledProviders().contains(providerId));
  IdentityProviderFactory<CustomIdentityProvider> providerFactory=(IdentityProviderFactory)this.session.getKeycloakSessionFactory().getProviderFactory(IdentityProvider.class,providerId);
  assertNotNull(providerFactory);
  IdentityProviderModel identityProviderModel=new IdentityProviderModel();
  identityProviderModel.setId("custom-provider");
  CustomIdentityProvider provider=providerFactory.create(identityProviderModel);
  assertNotNull(provider);
  IdentityProviderModel config=provider.getConfig();
  assertNotNull(config);
  assertEquals("custom-provider",config.getId());
}
