{
  SpnegoAuthenticator.bypassChallengeJavascript=true;
  driver.navigate().to(KERBEROS_APP_URL);
  String kcLoginPageLocation=driver.getCurrentUrl();
  String location="http://localhost:8081/auth/realms/test/protocol/openid-connect/auth?response_type=code&client_id=kerberos-app&redirect_uri=http%3A%2F%2Flocalhost%3A8081%2Fkerberos-portal&state=0%2F88a96ddd-84fe-4e77-8a46-02394d7b3a7d&login=true";
  spnegoSchemeFactory.setCredentials(username,password);
  Response response=client.target(kcLoginPageLocation).request().get();
  SpnegoAuthenticator.bypassChallengeJavascript=false;
  if (response.getStatus() == 302) {
    if (response.getLocation() == null)     return response;
    String uri=response.getLocation().toString();
    if (uri.contains("login-actions/required-action")) {
      response=client.target(uri).request().get();
    }
  }
  return response;
}
