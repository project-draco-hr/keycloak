{
  realmModel=realmManager.createRealm("JUGGLER");
  realmModel.setAccessCodeLifespan(100);
  realmModel.setAccessCodeLifespanUserAction(600);
  realmModel.setEnabled(true);
  realmModel.setName("JUGGLER");
  KeyPair keyPair=generateKeypair();
  realmModel.setPrivateKey(keyPair.getPrivate());
  realmModel.setPublicKey(keyPair.getPublic());
  realmModel.setAccessTokenLifespan(1000);
  realmModel.addDefaultRole("foo");
  realmModel=realmManager.getRealm(realmModel.getId());
  assertNotNull(realmModel);
  Assert.assertEquals(realmModel.getAccessCodeLifespan(),100);
  Assert.assertEquals(600,realmModel.getAccessCodeLifespanUserAction());
  Assert.assertEquals(realmModel.getAccessTokenLifespan(),1000);
  Assert.assertEquals(realmModel.isEnabled(),true);
  Assert.assertEquals(realmModel.getName(),"JUGGLER");
  Assert.assertArrayEquals(realmModel.getPrivateKey().getEncoded(),keyPair.getPrivate().getEncoded());
  Assert.assertArrayEquals(realmModel.getPublicKey().getEncoded(),keyPair.getPublic().getEncoded());
  Assert.assertEquals(3,realmModel.getDefaultRoles().size());
  Assert.assertTrue(realmModel.getDefaultRoles().contains("foo"));
  realmModel.getId();
  commit();
  List<RealmModel> realms=model.getRealms();
  Assert.assertEquals(realms.size(),2);
}
