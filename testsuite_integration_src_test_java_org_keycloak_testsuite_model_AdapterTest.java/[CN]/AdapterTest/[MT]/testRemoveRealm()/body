{
  test1CreateRealm();
  UserModel user=realmManager.getSession().users().addUser(realmModel,"bburke");
  UserCredentialModel cred=new UserCredentialModel();
  cred.setType(CredentialRepresentation.PASSWORD);
  cred.setValue("password");
  realmManager.getSession().userCredentialManager().updateCredential(realmModel,user,cred);
  ClientModel client=realmModel.addClient("client");
  ClientModel app=realmModel.addClient("test-app");
  RoleModel appRole=app.addRole("test");
  user.grantRole(appRole);
  client.addScopeMapping(appRole);
  RoleModel realmRole=realmModel.addRole("test");
  RoleModel realmRole2=realmModel.addRole("test2");
  realmRole.addCompositeRole(realmRole2);
  realmRole.addCompositeRole(appRole);
  app.addScopeMapping(realmRole);
  commit();
  realmModel=model.getRealm("JUGGLER");
  Assert.assertTrue(realmManager.removeRealm(realmModel));
  Assert.assertFalse(realmManager.removeRealm(realmModel));
  assertNull(realmManager.getRealm(realmModel.getId()));
}
