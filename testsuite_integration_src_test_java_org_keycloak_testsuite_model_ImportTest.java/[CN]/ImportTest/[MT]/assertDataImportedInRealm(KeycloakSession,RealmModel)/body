{
  Assert.assertTrue(realm.isVerifyEmail());
  Assert.assertFalse(realm.isUpdateProfileOnInitialSocialLogin());
  List<RequiredCredentialModel> creds=realm.getRequiredCredentials();
  Assert.assertEquals(1,creds.size());
  RequiredCredentialModel cred=creds.get(0);
  Assert.assertEquals("password",cred.getFormLabel());
  Assert.assertEquals(2,realm.getDefaultRoles().size());
  Assert.assertNotNull(realm.getRole("foo"));
  Assert.assertNotNull(realm.getRole("bar"));
  UserModel user=session.users().getUserByUsername("loginclient",realm);
  Assert.assertNotNull(user);
  Assert.assertEquals(0,session.users().getSocialLinks(user,realm).size());
  List<ApplicationModel> resources=realm.getApplications();
  for (  ApplicationModel app : resources) {
    System.out.println("app: " + app.getName());
  }
  Assert.assertEquals(5,resources.size());
  ApplicationModel application=realm.getApplicationByName("Application");
  ApplicationModel otherApp=realm.getApplicationByName("OtherApp");
  ApplicationModel accountApp=realm.getApplicationByName(Constants.ACCOUNT_MANAGEMENT_APP);
  ApplicationModel nonExisting=realm.getApplicationByName("NonExisting");
  Assert.assertNotNull(application);
  Assert.assertNotNull(otherApp);
  Assert.assertNull(nonExisting);
  Map<String,ApplicationModel> apps=realm.getApplicationNameMap();
  Assert.assertEquals(5,apps.size());
  Assert.assertTrue(apps.values().contains(application));
  Assert.assertTrue(apps.values().contains(otherApp));
  Assert.assertTrue(apps.values().contains(accountApp));
  realm.getApplications().containsAll(apps.values());
  Assert.assertNull(realm.getApplicationById("982734"));
  Assert.assertEquals(application,realm.getApplicationById(application.getId()));
  UserModel admin=session.users().getUserByUsername("admin",realm);
  Set<RoleModel> allRoles=admin.getRoleMappings();
  Assert.assertEquals(3,allRoles.size());
  Assert.assertTrue(allRoles.contains(realm.getRole("admin")));
  Assert.assertTrue(allRoles.contains(application.getRole("app-admin")));
  Assert.assertTrue(allRoles.contains(otherApp.getRole("otherapp-admin")));
  UserModel wburke=session.users().getUserByUsername("wburke",realm);
  allRoles=wburke.getRoleMappings();
  Assert.assertEquals(2,allRoles.size());
  Assert.assertFalse(allRoles.contains(realm.getRole("admin")));
  Assert.assertTrue(allRoles.contains(application.getRole("app-user")));
  Assert.assertTrue(allRoles.contains(otherApp.getRole("otherapp-user")));
  Assert.assertEquals(0,wburke.getRealmRoleMappings().size());
  Set<RoleModel> realmRoles=admin.getRealmRoleMappings();
  Assert.assertEquals(1,realmRoles.size());
  Assert.assertEquals("admin",realmRoles.iterator().next().getName());
  Set<RoleModel> appRoles=admin.getApplicationRoleMappings(application);
  Assert.assertEquals(1,appRoles.size());
  Assert.assertEquals("app-admin",appRoles.iterator().next().getName());
  ClientModel oauthClient=realm.findClient("oauthclient");
  Assert.assertEquals("clientpassword",oauthClient.getSecret());
  Assert.assertEquals(true,oauthClient.isEnabled());
  Assert.assertNotNull(oauthClient);
  Set<RoleModel> allScopes=oauthClient.getScopeMappings();
  Assert.assertEquals(2,allScopes.size());
  Assert.assertTrue(allScopes.contains(realm.getRole("admin")));
  Assert.assertTrue(allScopes.contains(application.getRole("app-user")));
  Set<RoleModel> realmScopes=oauthClient.getRealmScopeMappings();
  Assert.assertTrue(realmScopes.contains(realm.getRole("admin")));
  Set<RoleModel> appScopes=application.getApplicationScopeMappings(oauthClient);
  Assert.assertTrue(appScopes.contains(application.getRole("app-user")));
  UserModel socialUser=session.users().getUserByUsername("mySocialUser",realm);
  Set<SocialLinkModel> socialLinks=session.users().getSocialLinks(socialUser,realm);
  Assert.assertEquals(3,socialLinks.size());
  boolean facebookFound=false;
  boolean googleFound=false;
  boolean twitterFound=false;
  for (  SocialLinkModel socialLinkModel : socialLinks) {
    if ("facebook".equals(socialLinkModel.getSocialProvider())) {
      facebookFound=true;
      Assert.assertEquals(socialLinkModel.getSocialUserId(),"facebook1");
      Assert.assertEquals(socialLinkModel.getSocialUsername(),"fbuser1");
    }
 else     if ("google".equals(socialLinkModel.getSocialProvider())) {
      googleFound=true;
      Assert.assertEquals(socialLinkModel.getSocialUserId(),"google1");
      Assert.assertEquals(socialLinkModel.getSocialUsername(),"mySocialUser@gmail.com");
    }
 else     if ("twitter".equals(socialLinkModel.getSocialProvider())) {
      twitterFound=true;
      Assert.assertEquals(socialLinkModel.getSocialUserId(),"twitter1");
      Assert.assertEquals(socialLinkModel.getSocialUsername(),"twuser1");
    }
  }
  Assert.assertTrue(facebookFound && twitterFound && googleFound);
  UserModel foundSocialUser=session.users().getUserBySocialLink(new SocialLinkModel("facebook","facebook1","fbuser1"),realm);
  Assert.assertEquals(foundSocialUser.getUsername(),socialUser.getUsername());
  Assert.assertNull(session.users().getUserBySocialLink(new SocialLinkModel("facebook","not-existing","not-existing"),realm));
  SocialLinkModel foundSocialLink=session.users().getSocialLink(socialUser,"facebook",realm);
  Assert.assertEquals("facebook1",foundSocialLink.getSocialUserId());
  Assert.assertEquals("fbuser1",foundSocialLink.getSocialUsername());
  Assert.assertEquals("facebook",foundSocialLink.getSocialProvider());
  Assert.assertTrue(session.users().removeSocialLink(realm,socialUser,"facebook"));
  Assert.assertNull(session.users().getSocialLink(socialUser,"facebook",realm));
  Assert.assertFalse(session.users().removeSocialLink(realm,socialUser,"facebook"));
  Map<String,String> smtpConfig=realm.getSmtpConfig();
  Assert.assertTrue(smtpConfig.size() == 3);
  Assert.assertEquals("auto@keycloak.org",smtpConfig.get("from"));
  Assert.assertEquals("localhost",smtpConfig.get("host"));
  Assert.assertEquals("3025",smtpConfig.get("port"));
  Map<String,String> socialConfig=realm.getSocialConfig();
  Assert.assertTrue(socialConfig.size() == 2);
  Assert.assertEquals("abc",socialConfig.get("google.key"));
  Assert.assertEquals("def",socialConfig.get("google.secret"));
}
