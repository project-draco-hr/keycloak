{
  oauth.state(null);
  oauth.openLoginForm();
  Assert.assertTrue(errorPage.isCurrent());
  events.expect(EventType.LOGIN_ERROR).error(Errors.STATE_PARAM_NOT_FOUND).detail(Details.RESPONSE_TYPE,"code").detail(Details.REDIRECT_URI,oauth.getRedirectUri()).user((String)null).assertEvent();
}
