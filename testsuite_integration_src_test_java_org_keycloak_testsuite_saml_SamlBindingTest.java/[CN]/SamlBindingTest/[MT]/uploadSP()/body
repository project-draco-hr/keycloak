{
  String token=createToken();
  final String authHeader="Bearer " + token;
  ClientRequestFilter authFilter=new ClientRequestFilter(){
    @Override public void filter(    ClientRequestContext requestContext) throws IOException {
      requestContext.getHeaders().add(HttpHeaders.AUTHORIZATION,authHeader);
    }
  }
;
  Client client=ClientBuilder.newBuilder().register(authFilter).build();
  UriBuilder authBase=UriBuilder.fromUri("http://localhost:8081/auth");
  WebTarget adminRealms=client.target(AdminRoot.realmsUrl(authBase));
  MultipartFormDataOutput formData=new MultipartFormDataOutput();
  InputStream is=SamlBindingTest.class.getResourceAsStream("/saml/sp-metadata.xml");
  Assert.assertNotNull(is);
  formData.addFormData("file",is,MediaType.APPLICATION_XML_TYPE);
  WebTarget upload=adminRealms.path("demo/application-importers/saml2-entity-descriptor/upload");
  System.out.println(upload.getUri());
  Response response=upload.request().post(Entity.entity(formData,MediaType.MULTIPART_FORM_DATA));
  Assert.assertEquals(204,response.getStatus());
  response.close();
  client.close();
}
