{
  int realmNumber=realmCounter.getAndIncrement();
  String realmName=PerfTestUtils.getRealmName(realmNumber);
  RealmManager realmManager=new RealmManager(identitySession);
  RealmModel realm=realmManager.createRealm(realmName,realmName);
  for (int i=1; i <= rolesPerRealm; i++) {
    realm.addRole(PerfTestUtils.getRoleName(realmNumber,i));
  }
  for (int i=1; i <= defaultRolesPerRealm; i++) {
    realm.addDefaultRole(PerfTestUtils.getDefaultRoleName(realmNumber,i));
  }
  for (int i=1; i <= appsPerRealm; i++) {
    ApplicationModel application=realm.addApplication(PerfTestUtils.getApplicationName(realmNumber,i));
    for (int j=1; j <= rolesPerApp; j++) {
      application.addRole(PerfTestUtils.getApplicationRoleName(realmNumber,i,j));
    }
  }
  if (createRequiredCredentials) {
    realmManager.addRequiredCredential(realm,CredentialRepresentation.PASSWORD);
    realmManager.addRequiredCredential(realm,CredentialRepresentation.TOTP);
    realmManager.addRequiredCredential(realm,CredentialRepresentation.CLIENT_CERT);
  }
  log.info("Finished creation of realm " + realmName);
  int labelC=((realmNumber - 1) / NUMBER_OF_REALMS_IN_EACH_REPORT) * NUMBER_OF_REALMS_IN_EACH_REPORT;
  result.setSampleLabel("CreateRealms " + (labelC + 1) + "-"+ (labelC + NUMBER_OF_REALMS_IN_EACH_REPORT));
}
