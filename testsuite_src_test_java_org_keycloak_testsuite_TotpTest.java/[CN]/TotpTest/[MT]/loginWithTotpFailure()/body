{
  appPage.open();
  loginPage.register();
  registerPage.register("name","email","loginWithTotpFailure","password","password");
  totpPage.open();
  String totpSecret=totpPage.getTotpSecret();
  totpPage.configure(totp.generate(totpSecret));
  appPage.open();
  appPage.logout();
  loginPage.login("loginWithTotpSuccess","password");
  Assert.assertFalse(appPage.isCurrent());
  loginTotpPage.login("123456");
  Assert.assertTrue(loginTotpPage.isCurrent());
  Assert.assertEquals("Invalid username or password",loginTotpPage.getError());
}
