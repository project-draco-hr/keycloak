{
  appPage.open();
  loginPage.register();
  registerPage.register("name","email","loginWithTotpSuccess","password","password");
  totpPage.open();
  String totpSecret=totpPage.getTotpSecret();
  totpPage.configure(totp.generate(totpSecret));
  appPage.open();
  appPage.logout();
  loginPage.login("loginWithTotpSuccess","password");
  Assert.assertFalse(appPage.isCurrent());
  loginTotpPage.login(totp.generate(totpSecret));
  Assert.assertTrue(appPage.isCurrent());
}
