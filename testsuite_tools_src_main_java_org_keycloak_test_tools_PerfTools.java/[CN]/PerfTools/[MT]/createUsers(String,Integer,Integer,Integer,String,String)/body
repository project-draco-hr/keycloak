{
  if (count == null) {
    count=1;
  }
  if (batch == null) {
    batch=1000;
  }
  if (start == null) {
    start=0;
  }
  if (prefix == null) {
    prefix=String.valueOf(System.currentTimeMillis());
  }
  String[] rolesArray=roles != null ? roles.split(",") : new String[0];
  Job job=new Job("Create users " + prefix + "-"+ start+ " to "+ prefix+ "-"+ (start + count),count);
  jobs.add(job);
  for (int s=start; s < (start + count); s+=batch) {
    int c=s + batch <= (start + count) ? batch : (start + count) - s;
    executor.submit(new CreateUsers(job,sessionFactory,realmName,s,c,prefix,rolesArray));
  }
  return Response.noContent().build();
}
