{
  AddUserCommand command=new AddUserCommand();
  try {
    ParserGenerator.parseAndPopulate(command,COMMAND_NAME,args);
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    System.exit(1);
  }
  if (command.isContainer()) {
    List<String> l=new LinkedList<>(Arrays.asList(args));
    l.remove("--container");
    args=l.toArray(new String[l.size()]);
    org.jboss.as.domain.management.security.adduser.AddUser.main(args);
  }
 else   if (command.isHelp()) {
    printHelp(command);
  }
 else {
    try {
      checkRequired(command,"user");
      checkRequired(command,"password");
      File addUserFile=getAddUserFile(command);
      createUser(addUserFile,command.getRealm(),command.getUser(),command.getPassword(),command.getRoles(),command.getIterations());
    }
 catch (    Exception e) {
      System.err.println(e.getMessage());
      System.exit(1);
    }
  }
}
